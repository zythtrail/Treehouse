"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{86552:function(e,s,t){t.r(s),t.d(s,{BannerFullCmEthVault:function(){return d}});var n=t(57437),a=t(86976),l=t(27648),i=t(2265),r=t(17418),o=t(20878);function d(){let[e,s]=(0,i.useState)(!0),{isFullVault:t}=(0,r.C)(),d=(0,i.useCallback)(()=>s(!1),[]);return t&&e?(0,n.jsxs)(a.jL0,{variant:"brand",classNameInner:"justify-center max-w-[800px] md:max-w-none mx-auto",onClose:d,children:[(0,n.jsx)(a.pj7,{onClose:d,children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:31,height:30,viewBox:"0 0 31 30",fill:"none",children:[(0,n.jsx)("path",{d:"M5.1875 8.90625V23.9062C5.18935 24.5273 5.43688 25.1223 5.87602 25.5615C6.31515 26.0006 6.91022 26.2481 7.53125 26.25H16.5M25.8125 15V8.90625",stroke:"#00DDC2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M26.0469 3.75H4.95312C4.04703 3.75 3.3125 4.48453 3.3125 5.39062V6.79688C3.3125 7.70297 4.04703 8.4375 4.95312 8.4375H26.0469C26.953 8.4375 27.6875 7.70297 27.6875 6.79688V5.39062C27.6875 4.48453 26.953 3.75 26.0469 3.75Z",stroke:"#00DDC2",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M19.25 17.8125L15.5 21.5625L11.75 17.8125M15.5 20.267V13.125",stroke:"#00DDC2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.6331 20.1331C21.8106 19.9556 22.0984 19.9556 22.276 20.1331L25.0795 22.9367L27.8831 20.1331C28.0606 19.9556 28.3484 19.9556 28.526 20.1331C28.7035 20.3106 28.7035 20.5984 28.526 20.776L25.7224 23.5795L28.526 26.3831C28.7035 26.5606 28.7035 26.8484 28.526 27.026C28.3484 27.2035 28.0606 27.2035 27.8831 27.026L25.0795 24.2224L22.276 27.026C22.0984 27.2035 21.8106 27.2035 21.6331 27.026C21.4556 26.8484 21.4556 26.5606 21.6331 26.3831L24.4367 23.5795L21.6331 20.776C21.4556 20.5984 21.4556 20.3106 21.6331 20.1331Z",fill:"#00DDC2"})]})}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-1 text-[14px] leading-tight",children:[(0,n.jsxs)("span",{className:"text-grey-0 font-semibold",children:[o.VV[o.ox.CMETH]," vault is full."]}),(0,n.jsx)("span",{children:"Stay updated on Discord about the next cap raise."})]}),(0,n.jsx)(a.zxk,{variant:"brand-ghost",children:(0,n.jsx)(l.default,{href:a.b_F.DISCORD,target:"_blank",children:"Join Discord"})})]}):null}},51719:function(e,s,t){t.r(s),t.d(s,{CmETHVaultCapacity:function(){return r}});var n=t(57437),a=t(86976),l=t(17418),i=t(20878);function r(){let{depositCap:e,isFullVault:s,vaultCapacity:t,isLoading:r}=(0,l.C)();return(0,n.jsx)("div",{className:"inline-flex items-center text-[14px] leading-[1.1875em] gap-1 text-grey-4 ",children:r?(0,n.jsx)(a.OdW,{className:"w-[150px] h-[19px]"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-nowrap",children:"Vault Capacity (".concat((0,a.ufS)(e)," ").concat(i.VV[i.ox.CMETH],"):")})," ",(0,n.jsx)("span",{className:(0,a.cn)("text-grey-1",s&&"text-brand-50"),children:t>=0?"".concat((0,a.OEJ)(t,3)):"-"}),(0,n.jsx)(a.Qlu,{tooltip:"Percentage of ".concat(i.VV[i.ox.CMETH]," vault that has been filled."),classNameContent:"max-w-[330px]",children:(0,n.jsx)(a.t3L,{className:"h-4 w-4 flex-shrink-0"})})]})})}},50942:function(e,s,t){t.r(s),t.d(s,{CmEthDepositForm:function(){return k}});var n=t(57437),a=t(13590),l=t(86976),i=t(45320),r=t(20878),o=t(29501);function d(e){let{tokenAddress:s,className:t}=e,{readableBalance:a,balance:i,isLoading:o}=(0,r.HO)(r.ox.CMETH);return(0,n.jsx)("div",{className:(0,l.cn)("leading-[1.1875em]",t),children:o?(0,n.jsx)(l.OdW,{className:"w-[150px] h-[19px]"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-grey-4 text-nowrap leading-[1.1875em]",children:"Wallet Balance:"})," ",(0,n.jsx)("span",{children:a})]})})}var c=t(2265),u=t(64707),x=t(12629),m=t(78787),p=t(2398);function h(e){let{walletAddress:s,depositAmount:t}=e;return(0,n.jsx)(i.Pm,{type:"confirm",title:"Approve in Wallet",description:"Requesting spending cap for your transaction.",leftSlot:(0,n.jsx)(i.t1,{walletAddress:s,symbol:r.VV[r.ox.CMETH],amount:t}),rightSlot:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.lI,{className:"text-grey-1",children:(0,n.jsxs)("span",{className:"align-middle",children:[r.VV[r.ox.CMETH]," Vault"]})}),(0,n.jsxs)("span",{children:[r.VV[r.ox.CMETH]," Vault"]})]})})}function j(e){let{walletAddress:s,depositAmount:t}=e;return(0,n.jsx)(i.Pm,{title:"Confirm Your Request",description:"Sign message to approve your transaction.",leftSlot:(0,n.jsx)(i.t1,{walletAddress:s,symbol:r.VV[r.ox.CMETH],amount:t}),rightSlot:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.lI,{className:"text-grey-1",children:(0,n.jsxs)("span",{className:"align-middle",children:[r.VV[r.ox.CMETH]," Vault"]})}),(0,n.jsxs)("span",{children:[r.VV[r.ox.CMETH]," Vault"]})]})})}var g=t(27648);function f(e){let{walletAddress:s,depositAmount:t,hash:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Pm,{type:"success",title:"Deposit Successful!",description:"We’re thrilled to have you join the fixed income revolution!",successSlot:(0,n.jsx)(i.yS,{}),leftSlot:(0,n.jsx)(i.t1,{walletAddress:s,symbol:r.VV[r.ox.CMETH],amount:t}),rightSlot:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.lI,{className:"text-brand-50",children:(0,n.jsxs)("span",{className:"align-middle",children:[r.VV[r.ox.CMETH]," Vault"]})}),(0,n.jsxs)("span",{className:"text-brand-50",children:[r.VV[r.ox.CMETH]," Vault"]})]})}),(0,n.jsxs)(l.cNS,{className:"justify-start md:justify-between flex-col-reverse md:flex-row gap-4",children:[a&&(0,n.jsx)(l.zxk,{type:"button",variant:"ghost",size:"md",className:"md:flex-1",asChild:!0,children:(0,n.jsx)(g.default,{href:(0,r.Nf)(a,"mantle"),target:"_blank",children:"View on Mantle Explorer"})}),(0,n.jsx)(l.zxk,{type:"button",variant:"primary",size:"md",className:"md:flex-1",asChild:!0,children:(0,n.jsx)(g.default,{href:l.YjK.PORTFOLIO,shallow:!0,children:"View on Portfolio"})})]})]})}function C(e){let{walletAddress:s,depositAmount:t}=e;return(0,n.jsx)(i.Pm,{type:"processing",title:"Depositing...",description:"Give us a few seconds to process your deposit.",leftSlot:(0,n.jsx)(i.t1,{walletAddress:s,symbol:r.VV[r.ox.CMETH],amount:t}),rightSlot:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.lI,{className:"text-grey-8",children:(0,n.jsxs)("span",{className:"align-middle",children:[r.VV[r.ox.CMETH]," Vault"]})}),(0,n.jsxs)("span",{className:"text-grey-8",children:[r.VV[r.ox.CMETH]," Vault"]})]})})}function y(e){let{depositAmount:s,onSubmit:t}=e,[a,i]=(0,c.useState)(!1),o=async()=>{i(!0),await t(),i(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.fKu,{children:[(0,n.jsx)(l.$N8,{className:"text-[20px]",children:"Confirm Deposit"}),(0,n.jsx)(l.BeV,{size:"md",asChild:!0,className:"pt-2",children:(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:"mb-3",children:["You are about to deposit"," ",(0,n.jsx)("span",{className:"text-grey-1 font-semibold",children:"".concat(s," ").concat(r.VV[r.ox.CMETH])}),"."]})})})]}),(0,n.jsxs)(l.cNS,{className:"justify-start md:justify-between flex-col-reverse md:flex-row gap-4",children:[(0,n.jsx)(l.GGM,{asChild:!0,children:(0,n.jsx)(l.zxk,{type:"button",variant:"ghost",size:"md",className:"md:flex-1",children:"Cancel"})}),(0,n.jsx)(l.zxk,{variant:"primary",size:"md",className:"md:flex-1",onClick:o,disabled:a,children:"Confirm"})]})]})}function v(e){let{tokenAddress:s,depositAmount:t,isDisabled:a,resetForm:o,buttonLabel:d="Deposit ".concat(r.VV[r.ox.CMETH])}=e,[g,v]=(0,c.useState)(!1),{address:N}=(0,u.useAccount)(),{deposit:b,reset:V,resetApprove:E,isConfirmed:w,isConfirming:A,isError:k,isPending:M,status:T,hash:S,error:H,errorApprove:L,statusApprove:D,isPendingApprove:I}=function(e){let{tokenAddress:s,walletAddress:t}=e,{writeContract:n,data:a,status:l,error:i,isError:o,isPending:d,reset:c}=(0,m.useWriteContract)(),{isLoading:u,isSuccess:h}=(0,p.useWaitForTransactionReceipt)({hash:a,query:{enabled:!!a,structuralSharing:!1}}),{onAllowanceAndApproveForWallet:j,statusApprove:g,isPendingApprove:f,errorApprove:C,resetApprove:y}=(0,r.aM)();return{deposit:async function(e){if(t)try{await j({tokenAddress:s,walletAddress:t,expectedAmount:e,smartContract:r.CX.STAKING_CM_ETH},()=>{n({abi:r.Rc,address:r.CX.STAKING_CM_ETH,functionName:"deposit",args:[s,(0,x.f)(e),t]},{onSuccess:a})})}catch(e){console.error(e),console.log("write contract error")}async function a(){r.Eh.invalidateQueries({queryKey:["balance"]}),r.Eh.invalidateQueries({queryKey:["readContract"]}),r.Eh.invalidateQueries({queryKey:["getVipInfoEndpoint"]})}},reset:c,resetApprove:y,hash:a,status:l,statusApprove:g,isPendingApprove:f,errorApprove:C,error:i,isError:o,isPending:d,isConfirming:u,isConfirmed:h}}({tokenAddress:s,walletAddress:N}),_=async()=>{await b(t)};return(0,n.jsxs)(l.VqE,{open:g,onOpenChange:function(e){v(e),!e&&(E(),(w||k)&&setTimeout(()=>{V(),o()},500))},children:[(0,n.jsx)(l.hgM,{asChild:!0,children:(0,n.jsx)(l.zxk,{fluid:!0,size:"lg",type:"button",disabled:a,children:d})}),(0,n.jsxs)(l.cZJ,{className:"xs:max-w-[calc(100vw-48px)] sm:max-w-[500px] bottom-4 top-auto translate-y-0 md:top-1/2 md:-translate-y-1/2",onInteractOutside:e=>{(M||I)&&e.preventDefault()},children:["idle"===T&&"idle"===D&&(0,n.jsx)(y,{depositAmount:t,onSubmit:_}),"idle"===T&&I&&(0,n.jsx)(h,{walletAddress:N,depositAmount:t,receiveAmount:t}),"pending"===T&&(0,n.jsx)(j,{walletAddress:N,depositAmount:t}),"success"===T&&A&&(0,n.jsx)(C,{walletAddress:N,depositAmount:t}),"success"===T&&w&&(0,n.jsx)(f,{walletAddress:N,depositAmount:t,hash:S}),"error"===D&&(0,n.jsx)(i._m,{title:(0,r.o8)(L),description:(0,r.e$)(L,"We’re sorry, but we’re unable to process your deposit at the moment. Please try again later.")}),"error"===T&&(0,n.jsx)(i._m,{title:(0,r.o8)(H),description:(0,r.e$)(H,"We’re sorry, but we’re unable to process your deposit at the moment. Please try again later.")})]})]})}function N(e){let{children:s,type:t="button",size:a="lg",...i}=e;return s?(0,n.jsx)(n.Fragment,{children:s}):(0,n.jsx)(l.zxk,{fluid:!0,type:t,size:a,...i,disabled:!0,children:"Vault Full"})}var b=t(43623),V=t(71282);function E(e){let{tokenAddress:s,clearErrors:t,name:a,control:d,setValue:x}=e,m=(0,i.Ce)(),{chainId:p}=(0,u.useAccount)(),{isSigned:h}=(0,b.vI)(),{balance:j}=(0,r.HO)(s),g=r.VV[r.ox.CMETH],f=j?(0,l.VQX)((0,V.d)(j.value)):0,C=(0,o.qo)({name:"depositAmount",control:d});return(0,c.useEffect)(()=>{t&&t(),h&&Number(C)>f&&p===r.i$&&(null==d||d.setError(a,{message:r.in.EXCEED_WALLET_BALANCE}))},[C,f]),(0,n.jsx)(o.Qr,{name:a,control:d,render:e=>{let{field:s,fieldState:{error:t}}=e;async function a(e){s.onChange(e),x("depositAmount",e)}return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(l.UCQ,{inputSize:"md",placeholder:"0",modeStyle:"group",decimal:20,allowNegativeValue:!1,defaultValue:s.value,onValueChange:a,disabled:s.disabled,"aria-invalid":void 0!==t,leadingIcon:(0,n.jsx)("img",{src:"/assets/cmETH.svg",alt:"asset-icon",className:"group-aria-[disabled=true]/ui-kit-input:opacity-30 h-6 w-6"}),trailingIcon:(0,n.jsxs)("span",{className:"flex gap-4 items-center right-4",children:[(0,n.jsx)("span",{className:"text-grey-4 text-[20px] hidden md:block group-hover/ui-kit-input:text-grey-0",children:g}),(0,n.jsx)(l.zxk,{type:"button",variant:"toggle-button",size:"md",onClick:()=>a(f),disabled:!h||p!==r.i$,children:"Max"})]}),className:"pl-12",style:{paddingRight:m?"".concat(11*((null==g?void 0:g.length)||0)+130,"px"):"92px"}}),t&&(0,n.jsx)(l.ug1,{size:"none",variant:"danger",children:null==t?void 0:t.message})]})}})}var w=t(31229);let A=w.z.object({depositAmount:w.z.coerce.number().min(0)}).required({depositAmount:!0});function k(e){var s;let{containerButtonSubmitForm:t}=e,{isUnsupportedChain:c}=(0,r.AH)([r.i$]),{control:u,clearErrors:x,reset:m,formState:{errors:p},setValue:h}=(0,o.cI)({defaultValues:{depositAmount:void 0},resolver:(0,a.F)(A)}),j=(0,o.qo)({name:"depositAmount",control:u}),g=r.ox.CMETH;return(0,n.jsxs)("div",{className:"flex flex-col gap-8 text-[14px] h-full",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,n.jsx)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-2 md:items-center w-full md:w-fit",children:(0,n.jsx)("label",{className:"text-nowrap leading-[1.1875em]",children:"Enter Amount"})}),(0,n.jsx)(r.QY,{label:"Wallet Balance:",supportChainIDs:[r.i$],className:"hidden md:inline-flex",children:(0,n.jsx)(d,{tokenAddress:g,className:"hidden md:block truncate"})})]}),(0,n.jsx)(E,{name:"depositAmount",tokenAddress:g,control:u,setValue:h,clearErrors:x}),(0,n.jsx)(r.QY,{label:"Wallet Balance:",supportChainIDs:[r.i$],className:"md:hidden",children:(0,n.jsx)(d,{tokenAddress:g,className:"block md:hidden truncate"})}),(0,n.jsxs)("div",{className:"p-3 flex items-center justify-between bg-green-gray-12 rounded-xl",children:[(0,n.jsx)("p",{className:"text-md text-grey-4 leading-4",children:"Rewards"}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(i.my,{}),[{icon:"/assets/eigen-layer-point.svg",name:"EigenLayer Points"},{icon:"/assets/symbiotic-point.svg",name:"Symbiotic Points"},{icon:"/assets/karak-point.svg",name:"Karak Points"},{icon:"/assets/veda-point.svg",name:"Veda Points"},{icon:"/assets/cook-reward-point.svg",name:"COOK Powder"},{icon:"/assets/avs-yield.svg",name:"Future AVS Yield"}].map(e=>(0,n.jsx)(l.pnl,{children:(0,n.jsxs)(l.ua7,{delayDuration:0,children:[(0,n.jsx)(l.aJU,{children:(0,n.jsx)("img",{src:e.icon,className:"w-4 h-4"})}),(0,n.jsx)(l._vU,{side:"bottom",align:"start",className:"max-h-60  overflow-auto",children:(0,n.jsx)("h6",{className:"text-grey-1 text-md leading-[17px] font-normal",children:e.name})})]})},e.name))]})]})]}),(0,n.jsx)(t,{children:(0,n.jsx)(N,{children:(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsx)(v,{buttonLabel:(null===(s=p.depositAmount)||void 0===s?void 0:s.message)===r.in.EXCEED_WALLET_BALANCE?"Insufficient Balance":"Deposit ".concat(r.VV[r.ox.CMETH]),tokenAddress:r.ox.CMETH,depositAmount:String(j),isDisabled:Object.keys(p).length>0||0>=Number(j)||void 0===j||c,resetForm:()=>m({depositAmount:void 0})})})})})]})}},17418:function(e,s,t){t.d(s,{C:function(){return r}});var n=t(2265),a=t(20878),l=t(71282),i=t(27323);function r(){let{depositCap:e,isLoading:s}=function(){let{data:e,isLoading:s}=(0,i.useReadContract)({abi:a.Bb,address:a.CX.STAKING_CM_ETH,functionName:"supportedTokens",args:[a.ox.CMETH],chainId:a.i$}),t=e?null==e?void 0:e[2]:0;return{depositCap:e?Number((0,l.d)(t)):0,isLoading:s}}(),{totalStakeCmEthBalanced:t,isLoading:r}=function(){let{data:e,isLoading:s}=(0,i.useReadContract)({abi:a.Bb,address:a.CX.STAKING_CM_ETH,functionName:"totalStakedBalance",args:[a.ox.CMETH],chainId:a.i$});return{totalStakeCmEthBalanced:e?Number((0,l.d)(e)):0,isLoading:s}}(),o=(0,n.useMemo)(()=>t>=0&&e>0&&t>=e,[e,t]),d=(0,n.useMemo)(()=>o?1:t>=0&&e>0?t/e:0,[e,o,t]);return{isFullVault:o,depositCap:e,vaultCapacity:d,isLoading:(0,n.useMemo)(()=>s||r,[s,r]),isLoadingTotalStakedCmEthBalance:r}}}}]);