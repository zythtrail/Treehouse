(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7068],{47188:function(e,s,n){Promise.resolve().then(n.bind(n,83626)),Promise.resolve().then(n.bind(n,64242)),Promise.resolve().then(n.bind(n,26329)),Promise.resolve().then(n.bind(n,12895)),Promise.resolve().then(n.bind(n,49714)),Promise.resolve().then(n.bind(n,55541)),Promise.resolve().then(n.bind(n,61285)),Promise.resolve().then(n.bind(n,3262)),Promise.resolve().then(n.bind(n,33097)),Promise.resolve().then(n.bind(n,25770)),Promise.resolve().then(n.bind(n,38472)),Promise.resolve().then(n.bind(n,13692)),Promise.resolve().then(n.bind(n,57753)),Promise.resolve().then(n.bind(n,56222)),Promise.resolve().then(n.bind(n,15041)),Promise.resolve().then(n.bind(n,54049)),Promise.resolve().then(n.bind(n,8651)),Promise.resolve().then(n.bind(n,67888)),Promise.resolve().then(n.bind(n,42768)),Promise.resolve().then(n.bind(n,8332)),Promise.resolve().then(n.bind(n,11915)),Promise.resolve().then(n.bind(n,50497)),Promise.resolve().then(n.bind(n,66659)),Promise.resolve().then(n.bind(n,47317)),Promise.resolve().then(n.bind(n,12334)),Promise.resolve().then(n.bind(n,57384)),Promise.resolve().then(n.bind(n,72332)),Promise.resolve().then(n.bind(n,45199)),Promise.resolve().then(n.bind(n,97431)),Promise.resolve().then(n.bind(n,58059)),Promise.resolve().then(n.bind(n,47427)),Promise.resolve().then(n.bind(n,39057)),Promise.resolve().then(n.bind(n,66992)),Promise.resolve().then(n.bind(n,35651)),Promise.resolve().then(n.bind(n,50787)),Promise.resolve().then(n.bind(n,19285)),Promise.resolve().then(n.bind(n,34169)),Promise.resolve().then(n.bind(n,52097)),Promise.resolve().then(n.bind(n,66006)),Promise.resolve().then(n.bind(n,82512)),Promise.resolve().then(n.bind(n,83251)),Promise.resolve().then(n.bind(n,72337)),Promise.resolve().then(n.bind(n,58113)),Promise.resolve().then(n.bind(n,95145)),Promise.resolve().then(n.bind(n,39734)),Promise.resolve().then(n.bind(n,18862)),Promise.resolve().then(n.bind(n,60783)),Promise.resolve().then(n.bind(n,49986)),Promise.resolve().then(n.bind(n,88048)),Promise.resolve().then(n.bind(n,25075)),Promise.resolve().then(n.bind(n,86612)),Promise.resolve().then(n.bind(n,56662)),Promise.resolve().then(n.bind(n,19304)),Promise.resolve().then(n.bind(n,115)),Promise.resolve().then(n.bind(n,9462)),Promise.resolve().then(n.bind(n,70307)),Promise.resolve().then(n.bind(n,53747)),Promise.resolve().then(n.bind(n,76073)),Promise.resolve().then(n.bind(n,67496)),Promise.resolve().then(n.bind(n,65166)),Promise.resolve().then(n.bind(n,59772)),Promise.resolve().then(n.bind(n,36267)),Promise.resolve().then(n.bind(n,67033)),Promise.resolve().then(n.bind(n,48509)),Promise.resolve().then(n.bind(n,61027)),Promise.resolve().then(n.bind(n,48787)),Promise.resolve().then(n.bind(n,56862)),Promise.resolve().then(n.bind(n,13512)),Promise.resolve().then(n.bind(n,64660)),Promise.resolve().then(n.bind(n,20814)),Promise.resolve().then(n.bind(n,2690)),Promise.resolve().then(n.bind(n,90157)),Promise.resolve().then(n.bind(n,60913)),Promise.resolve().then(n.bind(n,776)),Promise.resolve().then(n.bind(n,86364)),Promise.resolve().then(n.bind(n,11135)),Promise.resolve().then(n.bind(n,98337)),Promise.resolve().then(n.bind(n,34235)),Promise.resolve().then(n.bind(n,3079)),Promise.resolve().then(n.bind(n,71066)),Promise.resolve().then(n.bind(n,43878)),Promise.resolve().then(n.bind(n,93851)),Promise.resolve().then(n.bind(n,38783)),Promise.resolve().then(n.bind(n,95938)),Promise.resolve().then(n.bind(n,52012)),Promise.resolve().then(n.bind(n,65791)),Promise.resolve().then(n.bind(n,22030)),Promise.resolve().then(n.bind(n,86265)),Promise.resolve().then(n.bind(n,82094)),Promise.resolve().then(n.bind(n,39791)),Promise.resolve().then(n.bind(n,29827)),Promise.resolve().then(n.bind(n,84147)),Promise.resolve().then(n.bind(n,2868)),Promise.resolve().then(n.bind(n,17026)),Promise.resolve().then(n.bind(n,21770)),Promise.resolve().then(n.bind(n,76451)),Promise.resolve().then(n.bind(n,8164)),Promise.resolve().then(n.bind(n,71632)),Promise.resolve().then(n.bind(n,83244)),Promise.resolve().then(n.bind(n,47985)),Promise.resolve().then(n.bind(n,97984)),Promise.resolve().then(n.t.bind(n,72972,23)),Promise.resolve().then(n.bind(n,70335)),Promise.resolve().then(n.bind(n,64707)),Promise.resolve().then(n.bind(n,89472)),Promise.resolve().then(n.bind(n,49813)),Promise.resolve().then(n.bind(n,394)),Promise.resolve().then(n.bind(n,23383)),Promise.resolve().then(n.bind(n,69372)),Promise.resolve().then(n.bind(n,18716)),Promise.resolve().then(n.bind(n,45432)),Promise.resolve().then(n.bind(n,44005)),Promise.resolve().then(n.bind(n,54283)),Promise.resolve().then(n.bind(n,94825)),Promise.resolve().then(n.bind(n,12364)),Promise.resolve().then(n.bind(n,93596)),Promise.resolve().then(n.bind(n,99552)),Promise.resolve().then(n.bind(n,21267)),Promise.resolve().then(n.bind(n,10898)),Promise.resolve().then(n.bind(n,55113)),Promise.resolve().then(n.bind(n,32233)),Promise.resolve().then(n.bind(n,28752)),Promise.resolve().then(n.bind(n,33507)),Promise.resolve().then(n.bind(n,77861)),Promise.resolve().then(n.bind(n,67970)),Promise.resolve().then(n.bind(n,67010)),Promise.resolve().then(n.bind(n,34087)),Promise.resolve().then(n.bind(n,25880)),Promise.resolve().then(n.bind(n,26290)),Promise.resolve().then(n.bind(n,75888)),Promise.resolve().then(n.bind(n,77494)),Promise.resolve().then(n.bind(n,38862)),Promise.resolve().then(n.bind(n,36627)),Promise.resolve().then(n.bind(n,84690)),Promise.resolve().then(n.bind(n,38914)),Promise.resolve().then(n.bind(n,27323)),Promise.resolve().then(n.bind(n,16986)),Promise.resolve().then(n.bind(n,91300)),Promise.resolve().then(n.bind(n,45249)),Promise.resolve().then(n.bind(n,19496)),Promise.resolve().then(n.bind(n,83034)),Promise.resolve().then(n.bind(n,24533)),Promise.resolve().then(n.bind(n,37635)),Promise.resolve().then(n.bind(n,17897)),Promise.resolve().then(n.bind(n,64647)),Promise.resolve().then(n.bind(n,33017)),Promise.resolve().then(n.bind(n,71353)),Promise.resolve().then(n.bind(n,81574)),Promise.resolve().then(n.bind(n,39488)),Promise.resolve().then(n.bind(n,63146)),Promise.resolve().then(n.bind(n,50372)),Promise.resolve().then(n.bind(n,13237)),Promise.resolve().then(n.bind(n,2398)),Promise.resolve().then(n.bind(n,37073)),Promise.resolve().then(n.bind(n,67185)),Promise.resolve().then(n.bind(n,13359)),Promise.resolve().then(n.bind(n,49487)),Promise.resolve().then(n.bind(n,43946)),Promise.resolve().then(n.bind(n,2724)),Promise.resolve().then(n.bind(n,78787)),Promise.resolve().then(n.bind(n,41599)),Promise.resolve().then(n.bind(n,77184))},776:function(e,s,n){"use strict";n.r(s),n.d(s,{CurrentCmETHStatisticsCard:function(){return d}});var r=n(57437),i=n(86976);function t(e){let{label:s,isLoading:n=!1,tooltip:t,children:o,variant:l="secondary"}=e;return(0,r.jsxs)(i.jbo,{className:"gap-2",children:[(0,r.jsx)(i.DKp,{size:"sm",icon:t,children:s}),(0,r.jsx)(i.G7j,{size:"sm",variant:l,className:"text-[14px] flex-wrap",isLoading:n,children:o})]})}function o(e){let{totalAPR:s=0,isLoading:n}=e;return(0,r.jsx)(t,{label:"Total APR",isLoading:n,children:s?(0,r.jsxs)(r.Fragment,{children:[(0,i.ufS)(Number(s)),(0,r.jsx)("span",{className:"text-grey-5",children:"%"})]}):"-"})}var l=n(20878);function d(e){let{className:s}=e,{totalEthDeposited:n,isLoading:d}=(0,l.r1)(),{ethInUsd:a,isLoading:m}=(0,l.CL)(),{cmEthInfo:h,isLoading:c}=(0,l.li)();return(0,r.jsxs)(i.Zbd,{className:(0,i.cn)("leading-[1.1875em] gap-6 md:px-6 h-full",s),size:"lg",variant:"ghost",children:[(0,r.jsxs)("h4",{className:"text-[16px] md:text-[14px] font-semibold leading-[1.2em]",children:[l.VV[l.ox.CMETH]," Statistics"]}),(0,r.jsxs)("div",{className:(0,i.cn)("grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 gap-6"),children:[(0,r.jsx)(o,{totalAPR:null==h?void 0:h.apr,isLoading:c}),(0,r.jsxs)(t,{label:"Total Underlying ETH",isLoading:d,variant:"primary",children:[n>=0?(0,i.ufS)(n):"-",(0,r.jsx)("span",{className:"text-grey-5",children:"ETH"})]}),(0,r.jsxs)(t,{label:"TVL",isLoading:m||d,variant:"primary",children:[n>=0&&a>=0?(0,i.xGv)(a*n):"-",(0,r.jsx)("span",{className:"text-grey-5",children:"USD"})]})]})]})}},86364:function(e,s,n){"use strict";n.r(s),n.d(s,{CmEthWithdrawForm:function(){return V}});var r=n(57437),i=n(13590),t=n(20878),o=n(29501),l=n(86976);function d(e){let{className:s}=e,{totalStakedBalanceCmEth:n,isLoading:i}=(0,t.Nx)();return(0,r.jsx)("div",{className:(0,l.cn)("leading-[1.1875em]",s),children:i?(0,r.jsx)(l.OdW,{className:"w-[150px] h-[19px]"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-grey-4 text-nowrap leading-[1.1875em]",children:"Balance:"})," ",(0,r.jsxs)("span",{children:[(0,l.ufS)(n)," ",t.VV[t.ox.CMETH]]})]})})}var a=n(45320),m=n(2265),h=n(64707),c=n(12629),b=n(78787),v=n(2398);function u(e){let{walletAddress:s,withdrawAmount:n}=e;return(0,r.jsx)(a.Pm,{type:"confirm",title:"Approve in Wallet",description:"Requesting spending cap for your transaction.",leftSlot:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.lI,{className:(0,l.cn)("text-grey-1"),children:(0,r.jsxs)("span",{className:"align-middle",children:[t.VV[t.ox.CMETH]," Vault"]})}),(0,r.jsxs)("span",{children:[t.VV[t.ox.CMETH]," Vault"]})]}),rightSlot:(0,r.jsx)(a.t1,{walletAddress:s,symbol:t.VV[t.ox.CMETH],amount:n})})}function x(e){let{walletAddress:s,withdrawAmount:n}=e;return(0,r.jsx)(a.Pm,{title:"Confirm Your Request",description:"Sign message to approve your transaction.",leftSlot:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.lI,{className:"text-grey-1",children:(0,r.jsxs)("span",{className:"align-middle",children:[t.VV[t.ox.CMETH]," Vault"]})}),(0,r.jsxs)("span",{children:[t.VV[t.ox.CMETH]," Vault"]})]}),rightSlot:(0,r.jsx)(a.t1,{walletAddress:s,symbol:t.VV[t.ox.CMETH],amount:n})})}function P(e){let{withdrawAmount:s,onSubmit:n}=e,[i,o]=(0,m.useState)(!1),d=async()=>{o(!0),await n(),o(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.fKu,{children:[(0,r.jsx)(l.$N8,{className:"text-[20px]",children:"Confirm Withdraw"}),(0,r.jsx)(l.BeV,{size:"md",asChild:!0,className:"pt-2",children:(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"mb-3",children:["You are about to withdraw"," ",(0,r.jsx)("span",{className:"text-grey-1 font-semibold",children:"".concat(s," ").concat(t.VV[t.ox.CMETH])}),"."]})})})]}),(0,r.jsxs)(l.cNS,{className:"justify-start md:justify-between flex-col-reverse md:flex-row gap-4",children:[(0,r.jsx)(l.GGM,{asChild:!0,children:(0,r.jsx)(l.zxk,{type:"button",variant:"ghost",size:"md",className:"md:flex-1",children:"Cancel"})}),(0,r.jsx)(l.zxk,{variant:"primary",size:"md",className:"md:flex-1",onClick:d,disabled:i,children:"Confirm"})]})]})}var j=n(27648);function p(e){let{walletAddress:s,withdrawAmount:n,hash:i}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Pm,{type:"success",title:"Withdrawal Successful!",successSlot:(0,r.jsx)(a.yS,{}),leftSlot:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.lI,{className:"text-grey-1",children:(0,r.jsxs)("span",{className:"align-middle",children:[t.VV[t.ox.CMETH]," Vault"]})}),(0,r.jsxs)("span",{children:[t.VV[t.ox.CMETH]," Vault"]})]}),rightSlot:(0,r.jsx)(a.t1,{walletAddress:s,symbol:t.VV[t.ox.CMETH],amount:n,className:"text-brand-50"})}),(0,r.jsxs)(l.cNS,{className:"justify-start md:justify-between flex-col-reverse md:flex-row gap-4",children:[i&&(0,r.jsx)(l.zxk,{type:"button",variant:"ghost",size:"md",className:"md:flex-1",asChild:!0,children:(0,r.jsx)(j.default,{href:(0,t.Nf)(i,"mantle"),target:"_blank",children:"View on Mantle Explorer"})}),(0,r.jsx)(l.zxk,{type:"button",variant:"primary",size:"md",className:"md:flex-1",asChild:!0,children:(0,r.jsx)(j.default,{href:l.YjK.PORTFOLIO,shallow:!0,children:"View on Portfolio"})})]})]})}function g(e){let{walletAddress:s,withdrawAmount:n}=e;return(0,r.jsx)(a.Pm,{type:"processing",title:"Withdrawing...",description:"Give us a few seconds to process your redemption.",leftSlot:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.lI,{className:"text-grey-1",children:(0,r.jsxs)("span",{className:"align-middle",children:[t.VV[t.ox.CMETH]," Vault"]})}),(0,r.jsxs)("span",{children:[t.VV[t.ox.CMETH]," Vault"]})]}),rightSlot:(0,r.jsx)(a.t1,{walletAddress:s,symbol:t.VV[t.ox.CMETH],amount:n,className:"text-gray-8",iconClassName:"opacity-30"})})}function f(e){let{tokenAddress:s,withdrawAmount:n,isDisabled:i,resetForm:o,buttonLabel:d="Withdraw ".concat(t.VV[t.ox.CMETH])}=e,[j,f]=(0,m.useState)(!1),{address:w}=(0,h.useAccount)(),{withdraw:y,reset:N,resetApprove:C,isConfirmed:V,isConfirming:E,isError:A,isPending:S,status:T,hash:H,error:M,errorApprove:k,statusApprove:z,isPendingApprove:L}=function(e){let{tokenAddress:s,walletAddress:n}=e,{writeContract:r,data:i,status:o,error:l,isError:d,isPending:a,reset:m}=(0,b.useWriteContract)(),{isLoading:h,isSuccess:u}=(0,v.useWaitForTransactionReceipt)({hash:i,query:{enabled:!!i,structuralSharing:!1}}),{onAllowanceAndApproveForWallet:x,statusApprove:P,isPendingApprove:j,errorApprove:p,resetApprove:g}=(0,t.aM)();return{withdraw:async function(e){if(n)try{await x({tokenAddress:s,walletAddress:n,expectedAmount:e,smartContract:t.CX.STAKING_CM_ETH},()=>{r({abi:t.Rc,address:t.CX.STAKING_CM_ETH,functionName:"withdraw",args:[s,(0,c.f)(e),n]},{onSuccess:i})})}catch(e){console.error(e),console.log("write contract error")}async function i(){t.Eh.invalidateQueries({queryKey:["balance"]}),t.Eh.invalidateQueries({queryKey:["readContract"]}),t.Eh.invalidateQueries({queryKey:["getVipInfoEndpoint"]})}},reset:m,resetApprove:g,hash:i,status:o,statusApprove:P,isPendingApprove:j,errorApprove:p,error:l,isError:d,isPending:a,isConfirming:h,isConfirmed:u}}({tokenAddress:s,walletAddress:w}),_=async()=>{await y(n)};return(0,r.jsxs)(l.VqE,{open:j,onOpenChange:function(e){f(e),!e&&(C(),(V||A)&&setTimeout(()=>{N(),o()},500))},children:[(0,r.jsx)(l.hgM,{asChild:!0,children:(0,r.jsx)(l.zxk,{fluid:!0,size:"lg",type:"button",disabled:i,children:d})}),(0,r.jsxs)(l.cZJ,{className:"xs:max-w-[calc(100vw-48px)] sm:max-w-[500px] bottom-4 top-auto translate-y-0 md:top-1/2 md:-translate-y-1/2",onInteractOutside:e=>{(S||L)&&e.preventDefault()},children:["idle"===T&&"idle"===z&&(0,r.jsx)(P,{withdrawAmount:n,onSubmit:_}),"idle"===T&&L&&(0,r.jsx)(u,{walletAddress:w,withdrawAmount:n,receiveAmount:n}),"pending"===T&&(0,r.jsx)(x,{walletAddress:w,withdrawAmount:n}),"success"===T&&E&&(0,r.jsx)(g,{walletAddress:w,withdrawAmount:n}),"success"===T&&V&&(0,r.jsx)(p,{walletAddress:w,withdrawAmount:n,hash:H}),"error"===z&&(0,r.jsx)(a._m,{title:(0,t.o8)(k),description:(0,t.e$)(k,"We’re sorry, but we’re unable to process your withdraw at the moment. Please try again later.")}),"error"===T&&(0,r.jsx)(a._m,{title:(0,t.o8)(M),description:(0,t.e$)(M,"We’re sorry, but we’re unable to process your withdraw at the moment. Please try again later.")})]})]})}var w=n(43623);function y(e){let{tokenAddress:s,clearErrors:n,name:i,control:d,setValue:h}=e,c=(0,a.Ce)(),{isSigned:b}=(0,w.vI)(),{totalStakedBalanceCmEth:v,isLoading:u}=(0,t.Nx)(),x=t.VV[t.ox.CMETH],P=v||0,j=(0,o.qo)({name:"withdrawAmount",control:d});return(0,m.useEffect)(()=>{n&&n(),Number(j)>P&&(null==d||d.setError(i,{message:t.in.EXCEED_WALLET_BALANCE}))},[j,P]),(0,r.jsx)(o.Qr,{name:i,control:d,render:e=>{let{field:s,fieldState:{error:n}}=e;async function i(e){s.onChange(e),h("withdrawAmount",e)}return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.UCQ,{inputSize:"md",placeholder:"0",modeStyle:"group",decimal:20,allowNegativeValue:!1,defaultValue:s.value,onValueChange:i,disabled:s.disabled,"aria-invalid":void 0!==n,leadingIcon:(0,r.jsx)("img",{src:"/assets/cmETH.svg",alt:"asset-icon",className:"group-aria-[disabled=true]/ui-kit-input:opacity-30 h-6 w-6"}),trailingIcon:(0,r.jsxs)("span",{className:"flex gap-4 items-center right-4",children:[(0,r.jsx)("span",{className:"text-grey-4 text-[20px] hidden md:block group-hover/ui-kit-input:text-grey-0",children:x}),(0,r.jsx)(l.zxk,{type:"button",variant:"toggle-button",size:"md",onClick:()=>i(P),disabled:!b,children:"Max"})]}),className:"pl-12",style:{paddingRight:c?"".concat(11*((null==x?void 0:x.length)||0)+130,"px"):"92px"}}),n&&(0,r.jsx)(l.ug1,{size:"none",variant:"danger",children:null==n?void 0:n.message})]})}})}var N=n(31229);let C=N.z.object({withdrawAmount:N.z.coerce.number().min(0)}).required({withdrawAmount:!0});function V(e){var s;let{containerButtonSubmitForm:n}=e,{isUnsupportedChain:l}=(0,t.AH)([t.i$]),{control:a,clearErrors:m,reset:h,formState:{errors:c},setValue:b}=(0,o.cI)({defaultValues:{withdrawAmount:void 0},resolver:(0,i.F)(C)}),v=(0,o.qo)({name:"withdrawAmount",control:a}),u=t.ox.CMETH;return(0,r.jsxs)("div",{className:"flex flex-col gap-8 text-[14px] h-full",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,r.jsx)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-2 md:items-center w-full md:w-fit",children:(0,r.jsx)("label",{className:"text-nowrap leading-[1.1875em]",children:"Enter Amount"})}),(0,r.jsx)(t.QY,{label:"Balance:",supportChainIDs:[t.i$],className:"hidden md:inline-flex",children:(0,r.jsx)(d,{className:"hidden md:block truncate"})})]}),(0,r.jsx)(y,{name:"withdrawAmount",tokenAddress:u,control:a,setValue:b,clearErrors:m}),(0,r.jsx)(t.QY,{label:"Balance:",supportChainIDs:[t.i$],className:"md:hidden",children:(0,r.jsx)(d,{className:"block md:hidden truncate"})})]}),(0,r.jsx)(n,{children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)(f,{buttonLabel:(null===(s=c.withdrawAmount)||void 0===s?void 0:s.message)===t.in.EXCEED_WALLET_BALANCE?"Insufficient Balance":"Withdraw ".concat(t.VV[t.ox.CMETH]),tokenAddress:t.ox.CMETH,withdrawAmount:String(v),isDisabled:Object.keys(c).length>0||0>=Number(v)||void 0===v||l,resetForm:()=>h({withdrawAmount:void 0})})})})]})}},77184:function(e,s,n){"use strict";n.r(s),n.d(s,{ButtonSubmitForm:function(){return l}});var r=n(57437),i=n(55281);n(28340),n(12818),n(18121),n(64601),n(93231);var t=n(9256);n(89974),n(40196),n(85020);var o=n(67816);function l(e){let{children:s}=e;return(0,r.jsx)(t.GeoBlockingConnectWallet,{children:(0,r.jsx)(i.ButtonConnectWallet,{children:(0,r.jsx)(o.ButtonSwitchChain,{children:s})})})}n(67913),n(76151)}},function(e){e.O(0,[5816,8612,5878,9345,5273,8371,878,7359,3623,5320,9265,2719,808,2971,2117,1744],function(){return e(e.s=47188)}),_N_E=e.O()}]);