(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[880],{70289:function(e,s,t){Promise.resolve().then(t.bind(t,83626)),Promise.resolve().then(t.bind(t,64242)),Promise.resolve().then(t.bind(t,26329)),Promise.resolve().then(t.bind(t,12895)),Promise.resolve().then(t.bind(t,49714)),Promise.resolve().then(t.bind(t,55541)),Promise.resolve().then(t.bind(t,61285)),Promise.resolve().then(t.bind(t,3262)),Promise.resolve().then(t.bind(t,33097)),Promise.resolve().then(t.bind(t,25770)),Promise.resolve().then(t.bind(t,38472)),Promise.resolve().then(t.bind(t,13692)),Promise.resolve().then(t.bind(t,57753)),Promise.resolve().then(t.bind(t,56222)),Promise.resolve().then(t.bind(t,15041)),Promise.resolve().then(t.bind(t,54049)),Promise.resolve().then(t.bind(t,8651)),Promise.resolve().then(t.bind(t,67888)),Promise.resolve().then(t.bind(t,42768)),Promise.resolve().then(t.bind(t,8332)),Promise.resolve().then(t.bind(t,11915)),Promise.resolve().then(t.bind(t,50497)),Promise.resolve().then(t.bind(t,66659)),Promise.resolve().then(t.bind(t,47317)),Promise.resolve().then(t.bind(t,12334)),Promise.resolve().then(t.bind(t,57384)),Promise.resolve().then(t.bind(t,72332)),Promise.resolve().then(t.bind(t,45199)),Promise.resolve().then(t.bind(t,97431)),Promise.resolve().then(t.bind(t,58059)),Promise.resolve().then(t.bind(t,47427)),Promise.resolve().then(t.bind(t,39057)),Promise.resolve().then(t.bind(t,66992)),Promise.resolve().then(t.bind(t,35651)),Promise.resolve().then(t.bind(t,50787)),Promise.resolve().then(t.bind(t,19285)),Promise.resolve().then(t.bind(t,34169)),Promise.resolve().then(t.bind(t,52097)),Promise.resolve().then(t.bind(t,66006)),Promise.resolve().then(t.bind(t,82512)),Promise.resolve().then(t.bind(t,83251)),Promise.resolve().then(t.bind(t,72337)),Promise.resolve().then(t.bind(t,58113)),Promise.resolve().then(t.bind(t,95145)),Promise.resolve().then(t.bind(t,39734)),Promise.resolve().then(t.bind(t,18862)),Promise.resolve().then(t.bind(t,60783)),Promise.resolve().then(t.bind(t,49986)),Promise.resolve().then(t.bind(t,88048)),Promise.resolve().then(t.bind(t,25075)),Promise.resolve().then(t.bind(t,86612)),Promise.resolve().then(t.bind(t,56662)),Promise.resolve().then(t.bind(t,19304)),Promise.resolve().then(t.bind(t,115)),Promise.resolve().then(t.bind(t,9462)),Promise.resolve().then(t.bind(t,70307)),Promise.resolve().then(t.bind(t,53747)),Promise.resolve().then(t.bind(t,76073)),Promise.resolve().then(t.bind(t,67496)),Promise.resolve().then(t.bind(t,65166)),Promise.resolve().then(t.bind(t,59772)),Promise.resolve().then(t.bind(t,36267)),Promise.resolve().then(t.bind(t,67033)),Promise.resolve().then(t.bind(t,48509)),Promise.resolve().then(t.bind(t,61027)),Promise.resolve().then(t.bind(t,56862)),Promise.resolve().then(t.bind(t,13512)),Promise.resolve().then(t.bind(t,64660)),Promise.resolve().then(t.bind(t,20814)),Promise.resolve().then(t.bind(t,2690)),Promise.resolve().then(t.bind(t,36678)),Promise.resolve().then(t.bind(t,60913)),Promise.resolve().then(t.bind(t,96035)),Promise.resolve().then(t.bind(t,75570)),Promise.resolve().then(t.bind(t,435)),Promise.resolve().then(t.bind(t,93231)),Promise.resolve().then(t.bind(t,9256)),Promise.resolve().then(t.bind(t,62896)),Promise.resolve().then(t.bind(t,89974)),Promise.resolve().then(t.bind(t,61623)),Promise.resolve().then(t.bind(t,76776)),Promise.resolve().then(t.bind(t,27923)),Promise.resolve().then(t.bind(t,94468)),Promise.resolve().then(t.bind(t,11135)),Promise.resolve().then(t.bind(t,86812)),Promise.resolve().then(t.bind(t,15080)),Promise.resolve().then(t.bind(t,34235)),Promise.resolve().then(t.bind(t,71066)),Promise.resolve().then(t.bind(t,93851)),Promise.resolve().then(t.bind(t,38783)),Promise.resolve().then(t.bind(t,95938)),Promise.resolve().then(t.bind(t,52012)),Promise.resolve().then(t.bind(t,65791)),Promise.resolve().then(t.bind(t,22030)),Promise.resolve().then(t.bind(t,86265)),Promise.resolve().then(t.t.bind(t,72972,23)),Promise.resolve().then(t.bind(t,70335)),Promise.resolve().then(t.bind(t,64707)),Promise.resolve().then(t.bind(t,89472)),Promise.resolve().then(t.bind(t,49813)),Promise.resolve().then(t.bind(t,394)),Promise.resolve().then(t.bind(t,23383)),Promise.resolve().then(t.bind(t,69372)),Promise.resolve().then(t.bind(t,18716)),Promise.resolve().then(t.bind(t,45432)),Promise.resolve().then(t.bind(t,44005)),Promise.resolve().then(t.bind(t,54283)),Promise.resolve().then(t.bind(t,94825)),Promise.resolve().then(t.bind(t,12364)),Promise.resolve().then(t.bind(t,93596)),Promise.resolve().then(t.bind(t,99552)),Promise.resolve().then(t.bind(t,21267)),Promise.resolve().then(t.bind(t,10898)),Promise.resolve().then(t.bind(t,55113)),Promise.resolve().then(t.bind(t,32233)),Promise.resolve().then(t.bind(t,28752)),Promise.resolve().then(t.bind(t,33507)),Promise.resolve().then(t.bind(t,77861)),Promise.resolve().then(t.bind(t,67970)),Promise.resolve().then(t.bind(t,67010)),Promise.resolve().then(t.bind(t,34087)),Promise.resolve().then(t.bind(t,25880)),Promise.resolve().then(t.bind(t,26290)),Promise.resolve().then(t.bind(t,75888)),Promise.resolve().then(t.bind(t,77494)),Promise.resolve().then(t.bind(t,38862)),Promise.resolve().then(t.bind(t,36627)),Promise.resolve().then(t.bind(t,84690)),Promise.resolve().then(t.bind(t,38914)),Promise.resolve().then(t.bind(t,27323)),Promise.resolve().then(t.bind(t,16986)),Promise.resolve().then(t.bind(t,91300)),Promise.resolve().then(t.bind(t,45249)),Promise.resolve().then(t.bind(t,19496)),Promise.resolve().then(t.bind(t,83034)),Promise.resolve().then(t.bind(t,24533)),Promise.resolve().then(t.bind(t,37635)),Promise.resolve().then(t.bind(t,17897)),Promise.resolve().then(t.bind(t,64647)),Promise.resolve().then(t.bind(t,33017)),Promise.resolve().then(t.bind(t,71353)),Promise.resolve().then(t.bind(t,81574)),Promise.resolve().then(t.bind(t,39488)),Promise.resolve().then(t.bind(t,63146)),Promise.resolve().then(t.bind(t,50372)),Promise.resolve().then(t.bind(t,13237)),Promise.resolve().then(t.bind(t,97269)),Promise.resolve().then(t.bind(t,37073)),Promise.resolve().then(t.bind(t,67185)),Promise.resolve().then(t.bind(t,13359)),Promise.resolve().then(t.bind(t,49487)),Promise.resolve().then(t.bind(t,43946)),Promise.resolve().then(t.bind(t,2724)),Promise.resolve().then(t.bind(t,11684)),Promise.resolve().then(t.bind(t,41599))},435:function(e,s,t){"use strict";t.r(s),t.d(s,{CurrentTETHStatisticsCard:function(){return b}});var n=t(57437),i=t(66209),r=t(79263),a=t(88962),l=t(39502),o=t(37240),d=t(27323);function c(e){let{label:s,isLoading:t=!1,tooltip:r,children:a,variant:l="secondary"}=e;return(0,n.jsxs)(i.jbo,{children:[(0,n.jsx)(i.DKp,{size:"sm",icon:r,children:s}),(0,n.jsx)(i.G7j,{size:"sm",variant:l,className:"text-[14px] flex-wrap",isLoading:t,children:a})]})}function m(e){let{esApr:s,isLoading:t}=e;return(0,n.jsx)(c,{label:"ETH Staking APR",variant:"secondary",isLoading:t,tooltip:(0,n.jsx)(i.Qlu,{tooltip:"Native ETH Staking Yield from Lido (stETH)",classNameContent:"text-wrap max-w-[300px]",children:(0,n.jsx)(i.t3L,{className:"h-4 w-4 min-h-4 min-w-4"})}),children:s?(0,n.jsxs)(n.Fragment,{children:[(0,i.ufS)(Number(s)),(0,n.jsx)("span",{className:"text-grey-5",children:"%"})]}):"-"})}function u(e){let{mey:s,isLoading:t}=e;return(0,n.jsx)(c,{label:"MEY",variant:"secondary",isLoading:t,tooltip:(0,n.jsx)(i.Qlu,{tooltip:"Market Efficiency Yield (MEY) is the arbitrage interest rate earned based on the last 7 days of converging ETH interest rates.",classNameContent:"text-wrap max-w-[300px]",children:(0,n.jsx)(i.t3L,{className:"h-4 w-4 min-h-4 min-w-4"})}),children:s?(0,n.jsxs)(n.Fragment,{children:[(0,i.ufS)(Number(s)),(0,n.jsx)("span",{className:"text-grey-5",children:"%"})]}):"-"})}var h=t(27648);function x(e){let{totalAPR:s=0,isLoading:t}=e;return(0,n.jsx)(c,{label:"Total APR",isLoading:t,tooltip:(0,n.jsx)(i.Qlu,{tooltip:"ETH Staking APR + MEY = Total APR",classNameContent:"text-wrap max-w-[300px]",children:(0,n.jsx)(i.t3L,{className:"h-4 w-4 min-h-4 min-w-4"})}),children:s?(0,n.jsxs)(n.Fragment,{children:[(0,i.ufS)(Number(s)),(0,n.jsx)("span",{className:"text-grey-5",children:"%"}),(0,n.jsx)(r.wJ,{functionKey:r.ku.POINTS_SYSTEM,children:(0,n.jsx)(i.Qlu,{tooltip:(0,n.jsxs)(n.Fragment,{children:["Plus Treehouse rewards for early depositors and more. Learn more about the"," ",(0,n.jsx)(h.default,{href:"https://treehouse.finance/blog/treehouse-nuts-guide",target:"_blank",className:"text-brand-50 cursor-pointer hover:opacity-80",children:"Treehouse Rewards Program"})]}),classNameContent:"text-wrap max-w-[400px]",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:14,height:14,viewBox:"0 0 14 14",fill:"none",className:"h-4 w-4 min-h-4 min-w-4",children:(0,n.jsx)("path",{d:"M6.75557 1.32902C6.81212 1.06567 7.18788 1.06567 7.24443 1.32902L8.10192 5.32226C8.16388 5.61076 8.38924 5.83612 8.67774 5.89808L12.671 6.75557C12.9343 6.81212 12.9343 7.18788 12.671 7.24443L8.67774 8.10192C8.38924 8.16388 8.16388 8.38924 8.10192 8.67774L7.24443 12.671C7.18788 12.9343 6.81212 12.9343 6.75557 12.671L5.89808 8.67774C5.83612 8.38924 5.61076 8.16388 5.32226 8.10192L1.32902 7.24443C1.06567 7.18788 1.06567 6.81212 1.32902 6.75557L5.32226 5.89808C5.61076 5.83612 5.83612 5.61076 5.89808 5.32226L6.75557 1.32902Z",fill:"#B2F5ED",stroke:"#00DDC2",strokeWidth:"0.5"})})})})]}):"-"})}var v=t(71632),p=t(93804);function g(){let{data:e,isLoading:s}=(0,v.useQuery)({queryKey:["sotatek","TotalNutsDistributed"],queryFn:async()=>{var e,s;return null===(s=await (0,p.CX)())||void 0===s?void 0:null===(e=s.result)||void 0===e?void 0:e.point},refetchInterval:5e3});return(0,n.jsx)(c,{label:"Total Nuts Distributed",isLoading:s,tooltip:(0,n.jsx)(i.Qlu,{tooltip:"Additional ecosystem rewards on top of staking yield.",classNameContent:"text-wrap max-w-[230px]",children:(0,n.jsx)(i.t3L,{className:"h-4 w-4 min-h-4 min-w-4"})}),children:e?(0,p.Oq)(Number(e)):"-"})}function b(e){let{className:s}=e,{totalEthDeposited:t,isLoading:h}=(0,a.IM)(),{ethInUsd:v,isLoading:p}=function(){let{data:e=BigInt(0),isLoading:s}=(0,d.useReadContract)({abi:a.DX,address:a.lP.ETH_USD,functionName:"latestAnswer",scopeKey:"ethInUsd",chainId:o.R.id,query:{structuralSharing:!1}});return{ethInUsd:Number((0,l.b)(e,8)),isLoading:s}}(),{isLoadingTotalAPR:b,isLoadingLidoYield:j,isLoadingMey:f,lidoApr:w,mey:y,totalAPR:P}=(0,a.EB)();return(0,n.jsxs)(i.Zbd,{className:(0,i.cn)("leading-[1.1875em] gap-6 md:px-6 h-full",s),size:"lg",variant:"ghost",children:[(0,n.jsx)("h4",{className:"text-[16px] md:text-[14px] font-semibold leading-[1.2em]",children:"tETH Statistics"}),(0,n.jsxs)("div",{className:(0,i.cn)("grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 gap-6"),children:[(0,n.jsx)(x,{totalAPR:P,isLoading:b}),(0,n.jsx)(m,{esApr:w,isLoading:j}),(0,n.jsx)(u,{mey:y,isLoading:f}),(0,n.jsxs)(c,{label:"Total Underlying ETH",isLoading:h,variant:"primary",children:[t>=0?(0,i.ufS)(t):"-",(0,n.jsx)("span",{className:"text-grey-5",children:"ETH"})]}),(0,n.jsxs)(c,{label:"TVL",isLoading:p||h,variant:"primary",children:[t>=0&&v>=0?(0,i.xGv)(v*t):"-",(0,n.jsx)("span",{className:"text-grey-5",children:"USD"})]}),(0,n.jsx)(r.wJ,{functionKey:r.ku.POINTS_SYSTEM,children:(0,n.jsx)(g,{})})]})]})}},61623:function(e,s,t){"use strict";t.r(s),t.d(s,{ToastNotifyRedeem:function(){return l}});var n=t(57437),i=t(66209),r=t(27648),a=t(2265);function l(){let[e,s]=(0,a.useState)(!0);return e?(0,n.jsx)(i.ug1,{variant:"warn",className:"mb-4 md:text-[14px] md:min-h-[41px]",hasClose:!0,onClose:()=>s(!1),size:"sm",children:(0,n.jsxs)("div",{children:["Use this option to ensure"," ",(0,n.jsx)("strong",{className:"font-bold",children:"zero slippage"})," for redemptions above ",(0,n.jsx)("strong",{className:"font-bold",children:"250 ETH"}),". Read more about"," ",(0,n.jsx)(r.default,{href:i.b_F.REDEMPTION_BAND,shallow:!0,className:"underline underline-offset-2",children:"Redemption Bands"}),"."]})}):null}},76776:function(e,s,t){"use strict";t.r(s),t.d(s,{RedeemForm:function(){return k}});var n=t(57437),i=t(13590),r=t(66209),a=t(88962),l=t(93804),o=t(2265),d=t(29501),c=t(71282);function m(e){let{clearErrors:s,...t}=e,{isSigned:i}=(0,l.vI)(),{balance:m}=(0,a.HO)(a.eT.TASSET),u=m?(0,r.VQX)((0,c.d)(m.value)):0,h=(0,d.qo)(t);return(0,o.useEffect)(()=>{if(s&&s(),m&&Number(h)>u){var e;null===(e=t.control)||void 0===e||e.setError("redeemAmount",{message:a.in.EXCEED_WALLET_BALANCE})}},[h,m,u]),(0,n.jsx)(d.Qr,{...t,render:e=>{let{field:s,fieldState:{error:t}}=e;return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(r.UCQ,{inputSize:"md",placeholder:"0",modeStyle:"group",allowNegativeValue:!1,defaultValue:s.value,decimal:20,onValueChange:s.onChange,disabled:s.disabled,"aria-invalid":void 0!==t,variant:"brand",leadingIcon:(0,n.jsx)("img",{src:"/assets/tETH.svg",alt:"icon",className:"group-aria-[disabled=true]/ui-kit-input:opacity-30 h-6 w-6 flex-shrink-0"}),trailingIcon:(0,n.jsxs)("span",{className:"flex gap-4 items-center right-4",children:[(0,n.jsx)("span",{className:"text-grey-4 text-[20px] hidden md:block",children:"tETH"}),(0,n.jsx)(r.zxk,{type:"button",variant:"toggle-button",size:"md",disabled:!i,onClick:()=>s.onChange(u),children:"Max"})]}),className:"pl-12 pr-[92px] md:pr-[150px]"}),t&&(0,n.jsx)(r.ug1,{size:"none",variant:"danger",children:null==t?void 0:t.message})]})}})}function u(e){let{value:s}=e;return(0,n.jsx)(r.UCQ,{inputSize:"md",placeholder:"0",modeStyle:"group",readOnly:!0,decimal:20,defaultValue:s,leadingIcon:(0,n.jsx)("img",{src:"/assets/wstETH.svg",alt:"icon",className:"group-aria-[disabled=true]/ui-kit-input:opacity-30 h-6 w-6 flex-shrink-0"}),trailingIcon:(0,n.jsx)("span",{className:"text-[20px] text-grey-4 right-4",children:"wstETH"}),className:"pl-12 pr-[100px]"})}function h(e){let{tEthWstEthRate:s,isLoading:t=!1}=e;return(0,n.jsx)(r.UQy,{type:"single",collapsible:!0,children:(0,n.jsxs)(r.Qdk,{value:"pair-convert-info",children:[(0,n.jsx)(a.cd.Trigger,{isLoading:t,children:(0,n.jsx)(a.cd.Rate,{rate:s})}),(0,n.jsxs)(a.cd.Content,{children:[(0,n.jsx)(a.cd.Metric,{isLoading:t,label:"tETH/wstETH Rate",value:s,unit:"wstETH"}),(0,n.jsx)(a.cd.Metric,{isLoading:t,label:"Processing Period",value:"~".concat(a._u," days")}),(0,n.jsx)(a.cd.Metric,{isLoading:t,label:"Price Impact",value:"0%"})]})]})})}var x=t(79263),v=t(97654),p=t(64707),g=t(12629),b=t(11684),j=t(97269);function f(e){let{redeemAsset:s="-",redeemAmount:t,requestDate:i}=e;return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)("span",{children:i}),(0,n.jsxs)(x.lI,{className:"text-grey-1",children:[(0,n.jsx)("img",{src:"/assets/tETH.svg",alt:"icon",className:"w-6 h-6 flex-shrink-0 inline-block mr-1"}),(0,n.jsx)("span",{className:"align-middle",children:"".concat(t," ").concat(s)})]}),(0,n.jsx)("span",{children:"Vault"})]})}function w(e){let{address:s,receiveAsset:t="-",receiveAmount:i,estimatedAcceptDate:l,className:o,iconClassName:d}=e;return(0,n.jsxs)(n.Fragment,{children:[l&&(0,n.jsx)("span",{children:l}),(0,n.jsxs)(x.lI,{className:(0,r.cn)(o),children:[(0,n.jsx)("img",{src:"/assets/wstETH.svg",alt:"icon",className:(0,r.cn)("w-6 h-6 flex-shrink-0 inline-block mr-1",d)}),(0,n.jsx)("span",{className:"align-middle",children:"".concat(i," ").concat(t)})]}),(0,n.jsx)("span",{className:(0,r.cn)(s?"":"hidden md:block md:min-h-[14.25px]"),children:s&&(0,a.sC)(s)})]})}function y(e){let{address:s,redeemAsset:t="-",redeemAmount:i,receiveAsset:r="-",receiveAmount:a,estimatedAcceptDate:l,requestDate:o}=e;return(0,n.jsx)(x.Pm,{title:"Approve in Wallet",description:"Requesting spending cap for your transaction.",leftSlot:(0,n.jsx)(f,{requestDate:o,redeemAsset:t,redeemAmount:i}),rightSlot:(0,n.jsx)(w,{className:"text-grey-1",address:s,receiveAsset:r,receiveAmount:"~".concat(a),estimatedAcceptDate:l})})}function P(e){let{address:s,redeemAsset:t="-",redeemAmount:i,receiveAsset:r="-",receiveAmount:a,estimatedAcceptDate:l,requestDate:o}=e;return(0,n.jsx)(x.Pm,{title:"Confirm Your Request",description:"Sign message to approve your transaction.",leftSlot:(0,n.jsx)(f,{requestDate:o,redeemAsset:t,redeemAmount:i}),rightSlot:(0,n.jsx)(w,{className:"text-grey-1",address:s,receiveAsset:r,receiveAmount:"~".concat(a),estimatedAcceptDate:l})})}function N(e){let{redeemAsset:s="-",redeemAmount:t,receiveAsset:i="-",receiveAmount:r,estimatedAcceptDate:a,requestDate:l}=e;return(0,n.jsx)(x.Pm,{type:"processing",title:"Processing...",description:"Give us a few seconds to process your claim.",leftSlot:(0,n.jsx)(f,{requestDate:l,redeemAsset:s,redeemAmount:t}),rightSlot:(0,n.jsx)(w,{estimatedAcceptDate:a,receiveAsset:i,receiveAmount:"~".concat(r),iconClassName:"opacity-30"})})}var E=t(27648);function A(e){let{redeemAsset:s,redeemAmount:t,receiveAsset:i,receiveAmount:l,requestDate:o,estimatedAcceptDate:d}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Pm,{type:"success",title:"Redemption Pending!",description:(0,n.jsxs)(n.Fragment,{children:["Your redemption will be ready within"," ",(0,n.jsxs)("span",{className:"text-grey-1 font-bold",children:[a._u," days"]}),". Track the status of your redemption through the Claim tab."]}),leftSlot:(0,n.jsx)(f,{requestDate:o,redeemAsset:s,redeemAmount:t}),rightSlot:(0,n.jsx)(w,{estimatedAcceptDate:d,receiveAsset:i,receiveAmount:"~".concat(l)})}),(0,n.jsxs)(r.cNS,{className:"justify-start md:justify-between flex-col-reverse md:flex-row gap-4",children:[(0,n.jsx)(r.GGM,{asChild:!0,children:(0,n.jsx)(r.zxk,{type:"button",variant:"ghost",size:"md",className:"md:flex-1",children:"Close"})}),(0,n.jsx)(r.zxk,{type:"button",variant:"primary",size:"md",className:"md:flex-1",asChild:!0,children:(0,n.jsx)(E.default,{href:r.YjK.CLAIM,shallow:!0,children:"View Claim"})})]})]})}function T(e){let{redeemAmount:s,onSubmit:t}=e,[i,l]=(0,o.useState)(!1),d=async()=>{l(!0),await t(),l(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.fKu,{className:"space-y-3",children:[(0,n.jsx)(r.$N8,{className:"text-[20px]",children:"Confirm Redemption"}),(0,n.jsx)(r.BeV,{size:"md",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"mb-3",children:["You are about to redeem"," ",(0,n.jsx)("span",{className:"text-grey-1 font-semibold",children:"".concat(s," tETH")})," ","from the tETH Vault."]}),(0,n.jsx)("p",{children:"By confirming, you will no longer earn Staking Yield, Market Efficiency Yield (MEY) and Treehouse Nuts."}),(0,n.jsxs)("p",{className:"mt-3",children:["You'll be able to redeem your tETH in approximately"," ",(0,n.jsxs)("span",{className:"text-grey-1 font-semibold",children:[a._u," days"]}),"."]})]})})]}),(0,n.jsxs)(r.cNS,{className:"justify-start md:justify-between flex-col-reverse md:flex-row gap-4",children:[(0,n.jsx)(r.GGM,{asChild:!0,children:(0,n.jsx)(r.zxk,{type:"button",variant:"ghost",size:"md",className:"md:flex-1",children:"Cancel"})}),(0,n.jsx)(r.zxk,{type:"button",variant:"primary",size:"md",className:"md:flex-1",onClick:d,disabled:i,children:"Confirm"})]})]})}function C(e){let{redeemAmount:s,receiveAmount:t,isDisabled:i,resetForm:l}=e,[d,c]=(0,o.useState)(!1),{address:m}=(0,p.useAccount)(),{redeem:u,status:h,isConfirmed:f,isConfirming:w,isError:E,error:C,reset:S,isPending:H,statusApprove:L,isPendingApprove:D,errorApprove:R,resetApprove:k}=function(e){let{walletAddress:s}=e,{writeContract:t,data:n,status:i,error:r,isError:l,isPending:o,reset:d}=(0,b.useWriteContract)(),{isLoading:c,isSuccess:m}=(0,j.useWaitForTransactionReceipt)({hash:n,query:{structuralSharing:!1}}),{onAllowanceAndApproveForWallet:u,statusApprove:h,isPendingApprove:x,errorApprove:v,resetApprove:p}=(0,a.aM)();return{redeem:async function(e){let{redeemAmount:n}=e;if(s)try{u({tokenAddress:a.eT.TASSET,walletAddress:s,expectedAmount:n,smartContract:a.SC.THF_REDEMPTION_ADDRESS},()=>{t({abi:a.eo,address:a.SC.THF_REDEMPTION_ADDRESS,functionName:"redeem",args:[(0,g.f)(n)]},{onSuccess:i})})}catch(e){console.log("write contract error")}function i(){a.Eh.invalidateQueries({queryKey:["balance"]}),a.Eh.invalidateQueries({queryKey:["readContract"]}),a.Eh.invalidateQueries({queryKey:["getVipInfoEndpoint"]})}},reset:d,hash:n,status:i,error:r,isError:l,isPending:o,isConfirming:c,isConfirmed:m,statusApprove:h,isPendingApprove:x,errorApprove:v,resetApprove:p}}({walletAddress:m});async function _(){await u({redeemAmount:s})}return(0,n.jsxs)(r.VqE,{open:d,onOpenChange:function(e){c(e),!e&&(k(),(f||E)&&setTimeout(()=>{S(),l()},500))},children:[(0,n.jsx)(r.hgM,{asChild:!0,children:(0,n.jsx)(r.zxk,{fluid:!0,size:"lg",type:"button",disabled:i,children:"Redeem wstETH"})}),(0,n.jsxs)(r.cZJ,{className:"xs:max-w-[calc(100vw-48px)] sm:max-w-[500px] bottom-4 top-auto translate-y-0 md:top-1/2 md:-translate-y-1/2",onInteractOutside:e=>{(H||D)&&e.preventDefault()},children:["idle"===h&&"idle"===L&&(0,n.jsx)(T,{redeemAmount:s,onSubmit:_}),"idle"===h&&D&&(0,n.jsx)(y,{redeemAsset:"tETH",redeemAmount:s,receiveAsset:"wstETH",receiveAmount:t,requestDate:(0,v.WU)(Date.now(),"dd MMM yyyy"),estimatedAcceptDate:(0,r.oPx)({date:Date.now(),offsetDays:a._u})}),"pending"===h&&(0,n.jsx)(P,{redeemAsset:"tETH",redeemAmount:s,receiveAsset:"wstETH",receiveAmount:t,requestDate:(0,v.WU)(Date.now(),"dd MMM yyyy"),estimatedAcceptDate:(0,r.oPx)({date:Date.now(),offsetDays:a._u})}),"success"===h&&w&&(0,n.jsx)(N,{redeemAsset:"tETH",redeemAmount:s,receiveAsset:"wstETH",receiveAmount:t,requestDate:(0,v.WU)(Date.now(),"dd MMM yyyy"),estimatedAcceptDate:(0,r.oPx)({date:Date.now(),offsetDays:a._u})}),"success"===h&&f&&(0,n.jsx)(A,{redeemAsset:"tETH",redeemAmount:s,receiveAsset:"wstETH",receiveAmount:t,requestDate:(0,v.WU)(Date.now(),"dd MMM yyyy"),estimatedAcceptDate:(0,r.oPx)({date:Date.now(),offsetDays:a._u})}),"error"===L&&(0,n.jsx)(x._m,{title:(0,a.o8)(R),description:(0,a.e$)(R,"We’re sorry, but we’re unable to process your redeem at the moment. Please try again later.")}),"error"===h&&(0,n.jsx)(x._m,{title:(0,a.o8)(C),description:(0,a.e$)(C,"We’re sorry, but we’re unable to process your redeem at the moment. Please try again later.")})]})]})}var S=t(68651),H=t(27323),L=t(31229);let D=L.z.object({redeemAmount:L.z.number().min(0)}).required({redeemAmount:!0});function R(e){let{errorKey:s}=e;return s?(0,n.jsxs)(r.ug1,{variant:"danger",size:"sm",className:"md:text-[14px] px-4",children:["EXCEED_WALLET_BALANCE"===s&&a.in.EXCEED_WALLET_BALANCE_LONG_TEXT,"REDEMPTION_BAND_LIMIT"===s&&(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:justify-between sm:items-center",children:[(0,n.jsxs)("div",{children:["To use this function, you need to withdraw more than"," ",(0,n.jsxs)("strong",{className:"font-bold",children:[a.kl," ETH"]})," ","worth of tETH."]}),(0,n.jsx)("div",{children:(0,n.jsx)(r.zxk,{variant:"red-ghost",asChild:!0,className:"w-full sm:w-auto",children:(0,n.jsx)(E.default,{href:r.YjK.SWAP,shallow:!0,children:"Switch to Swap"})})})]})]}):null}function k(e){var s;let{connectWallet:t}=e,{isSigned:x}=(0,l.vI)(),{isUnsupportedChain:v}=(0,a.AH)(),{control:b,watch:j,reset:f,formState:{errors:w},clearErrors:y}=(0,d.cI)({defaultValues:{redeemAmount:void 0},resolver:(0,i.F)(D)}),P=j("redeemAmount",void 0),{receiveAmount:N,isLoading:E,tEthWstEthRate:A}=function(e){let{redeemAmount:s}=e,{chainId:t}=(0,p.useAccount)(),{data:n=BigInt(0),isLoading:i}=(0,H.useReadContract)({abi:a.$l,address:a.eT.TASSET,chainId:t,functionName:"previewRedeem",args:[(0,g.f)(String(s))],scopeKey:"previewRedeem-".concat(a.$R.TETH,"-").concat(a.$R.WSTETH,"-").concat(s)}),r=new S.Z((0,c.d)(n)),l=r.dividedBy(s);return{receiveAmount:r.toString(),minimumReceived:r.toString(),tEthWstEthRate:l.toString(),isLoading:i}}({redeemAmount:Number(P)>0?P:1}),T=(0,o.useMemo)(()=>P&&P<a.kl,[P]),L=(0,o.useMemo)(()=>{var e;return T?"REDEMPTION_BAND_LIMIT":(null===(e=w.redeemAmount)||void 0===e?void 0:e.message)===a.in.EXCEED_WALLET_BALANCE?"EXCEED_WALLET_BALANCE":void 0},[null===(s=w.redeemAmount)||void 0===s?void 0:s.message,T]);return(0,n.jsxs)(r.Zbd,{className:"gap-8 text-md",size:"lg",variant:"secondary",children:[(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,n.jsx)("div",{className:"flex items-center gap-4 leading-[1.2em] min-h-8",children:(0,n.jsx)("h4",{className:"text-2xl font-semibold leading-[1.2em]",children:"Redeem"})})}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center leading-[1.2em]",children:[(0,n.jsx)("label",{children:"Enter Amount"}),(0,n.jsx)(a.xK,{className:"hidden md:block truncate"})]}),(0,n.jsx)(m,{name:"redeemAmount",control:b,clearErrors:y}),(0,n.jsx)(a.xK,{className:"block md:hidden truncate"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 leading-[1.2em]",children:[(0,n.jsx)("label",{children:"You Receive"}),(0,n.jsx)(u,{value:Number(P)>0?N:0}),(0,n.jsx)(h,{tEthWstEthRate:A,isLoading:E})]}),x?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(R,{errorKey:L}),(0,n.jsx)(C,{redeemAmount:String(null!=P?P:0),receiveAmount:String(N),isDisabled:Object.keys(w).length>0||P<=0||void 0===P||T||v,resetForm:()=>f({redeemAmount:void 0})})]}):t]})}},27923:function(e,s,t){"use strict";t.r(s),t.d(s,{ToastNotifySwap:function(){return l}});var n=t(57437),i=t(66209),r=t(27648),a=t(2265);function l(){let[e,s]=(0,a.useState)(!0);return e?(0,n.jsx)(i.ug1,{variant:"warn",className:"mb-4 md:text-[14px] md:min-h-[41px]",hasClose:!0,onClose:()=>s(!1),size:"sm",children:(0,n.jsxs)("div",{children:["For redemptions above ",(0,n.jsx)("strong",{className:"font-bold",children:"250 ETH"}),", choose the ",(0,n.jsx)("strong",{className:"font-bold",children:"Redeem"})," option.",(0,n.jsx)("br",{className:"hidden md:block"})," Read more about"," ",(0,n.jsx)(r.default,{href:i.b_F.REDEMPTION_BAND,shallow:!0,className:"underline underline-offset-2",children:"Redemption Bands"}),"."]})}):null}},94468:function(e,s,t){"use strict";t.r(s),t.d(s,{SwapForm:function(){return Z}});var n=t(57437),i=t(13590),r=t(66209),a=t(88962),l=t(93804),o=t(2265),d=t(29501),c=t(16050),m=t(71282);function u(e){let{clearErrors:s,...t}=e,{isSigned:i}=(0,l.vI)(),{balance:c}=(0,a.HO)(a.eT.TASSET),u=c?(0,r.VQX)((0,m.d)(c.value)):0,h=(0,d.qo)(t);return(0,o.useEffect)(()=>{if(s&&s(),c&&Number(h)>u){var e;null===(e=t.control)||void 0===e||e.setError("swapAmount",{message:a.in.EXCEED_WALLET_BALANCE})}},[h,c,u]),(0,n.jsx)(d.Qr,{...t,render:e=>{let{field:s,fieldState:{error:t}}=e;return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(r.UCQ,{inputSize:"md",placeholder:"0",modeStyle:"group",allowNegativeValue:!1,defaultValue:s.value,decimal:20,onValueChange:s.onChange,disabled:s.disabled,"aria-invalid":void 0!==t,variant:"brand",leadingIcon:(0,n.jsx)("img",{src:"/assets/tETH.svg",alt:"icon",className:"group-aria-[disabled=true]/ui-kit-input:opacity-30 h-6 w-6 flex-shrink-0"}),trailingIcon:(0,n.jsxs)("span",{className:"flex gap-4 items-center right-4",children:[(0,n.jsx)("span",{className:"text-grey-4 text-[20px] hidden md:block",children:"tETH"}),(0,n.jsx)(r.zxk,{type:"button",variant:"toggle-button",size:"md",disabled:!i,onClick:()=>s.onChange(u),children:"Max"})]}),className:"pl-12 pr-[92px] md:pr-[150px]"}),t&&(0,n.jsx)(r.ug1,{size:"none",variant:"danger",children:null==t?void 0:t.message})]})}})}function h(e){let{value:s}=e;return(0,n.jsx)(r.UCQ,{inputSize:"md",placeholder:"0",modeStyle:"group",readOnly:!0,decimal:20,defaultValue:s,leadingIcon:(0,n.jsx)("img",{src:"/assets/wstETH.svg",alt:"icon",className:"group-aria-[disabled=true]/ui-kit-input:opacity-30 h-6 w-6 flex-shrink-0"}),trailingIcon:(0,n.jsx)("span",{className:"text-[20px] text-grey-4 right-4",children:"wstETH"}),className:"pl-12 pr-[100px]"})}var x=t(24432),v=t(37691),p=t(68651),g=t(39502),b=t(57303);let j=e=>e.replace(/(\.\d*[1-9])0+$/gi,"$1").replace(/\.0+$/gi,""),f=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return e.toFixed(s)},w=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return new p.Z((0,g.b)(e,s))},y=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return(0,b.v)(f(e,s),s)},P=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:18,i=new p.Z(10**(t>5?t-3:t)),r=new p.Z(10**(n>5?n-3:n)),a=w(e,0),l=w(s,0),o=p.Z.max(i.div(a),r.div(l));return p.Z.min(a.times(o),new p.Z(10**t))},N={tETH:0,wstETH:1},E=[18,18],A=(e,s,t,n,i,r)=>{let a=w(e,i),l=w(s,r),o=w(t,i),d=w(n,r),c=l.div(a),m=d.div(o);return c.gt(m)?new p.Z(0):new p.Z(1).minus(c.div(m)).times(100)};async function T(e,s,t){return await (0,v.L)(a.gb,{abi:a.Ob,address:a.W2[a.Bq.CURVE],functionName:"get_dy",args:[e,s,t]})}async function C(e,s,t){let n=N[e],i=N[s],[r,a]=[E[n],E[i]],l=(0,b.v)(t,r);if(l<=0)return 0;let o=await T(n,i,l),d=P(l,o,r,a),c=w(l,0);if(d.gte(c))return 0;let m=y(d.div(10**r),r),u=await T(n,i,m);return Number(j(A(l,o,m,u,r,a).toFixed(4)))}function S(e){let{tEthWstEthRate:s,fee:t,minimumReceived:i,amount:l=0,isLoading:d=!1,isHighPriceImpact:c=!1,setIsHighPriceImpact:m}=e,u=function(e){let{data:s}=(0,x.aM)({queryKey:["CurvePriceImpact","curvePriceImpact-".concat(e)],queryFn:async()=>e?await C("tETH","wstETH",e):0,enabled:!!e});return s}(String(l));return(0,o.useEffect)(()=>{u>=3?m(!0):m(!1)},[u]),(0,n.jsx)(r.UQy,{type:"single",collapsible:!0,children:(0,n.jsxs)(r.Qdk,{value:"pair-convert-info",children:[(0,n.jsx)(a.cd.Trigger,{isLoading:d,children:(0,n.jsx)(a.cd.Rate,{rate:s,isHigh:c})}),(0,n.jsxs)(a.cd.Content,{children:[(0,n.jsx)(a.cd.Metric,{isLoading:d,label:"tETH/wstETH Rate",value:s,unit:"wstETH"}),(0,n.jsx)(a.cd.Metric,{isLoading:d,label:"Minimum Recieved",value:i,unit:"wstETH"}),(0,n.jsx)(a.cd.Metric,{isLoading:d,label:"Price Impact",value:"".concat(u||0,"%"),isHigh:c})]})]})})}var H=t(79263);let L=["0.1","0.5"],D={warning:"Your transaction may be frontrun and result in an unfavourable trade",error:"Invalid Slippage Value"};function R(e){let{onValueChange:s,value:t=.1}=e,i=(0,H.Ce)(),[a,l]=(0,o.useState)(!1),d=t>100?"error":t>5?"warning":null,c=!0!==a&&void 0,m=!0===a&&null!==d,u=d&&D[d];return(0,o.useEffect)(()=>{!1===a&&(isNaN(t)||t<0||"error"===d)&&s(.5)},[a]),(0,n.jsxs)(r.h_2,{open:a,onOpenChange:l,children:[(0,n.jsx)(r.Qlu,{asChild:!0,open:c,tooltip:u,variant:"secondary",classNameContent:"max-w-[calc(100vw-80px)] md:max-w-[277px]",alignOffset:0,children:(0,n.jsx)(r.e_5,{inputSize:"md",variant:"ghost",className:"w-full md:w-[90px] md:h-8 md:rounded-lg",icon:(0,n.jsx)(r.SAU,{className:"w-6 h-6 md:h-4 md:w-4"}),"data-warning":"warning"===d,children:(0,n.jsx)(r.t93,{className:"text-md md:text-sm",children:"".concat(isNaN(t)?"-":t,"%")})})}),(0,n.jsxs)(r.Z8Q,{variant:"ghost",children:[(0,n.jsx)(r._xG,{value:String(t),onValueChange:e=>{s(Number(e))},children:L.map(e=>(0,n.jsx)(r.qBA,{value:e,hidden:!0,className:"h-10 md:h-8 text-md md:text-sm",children:"".concat(e,"%")},e))}),(0,n.jsx)(r.Qlu,{asChild:!0,open:m,tooltip:u,variant:"error"===d?"error":"secondary",classNameContent:"max-w-[calc(100vw-80px)] md:max-w-[277px]",side:i?"right":"bottom",alignOffset:0,children:(0,n.jsx)("div",{className:"h-10 flex items-center px-1 [&_>_label]:flex-1 relative",children:(0,n.jsx)(r.CUd,{inputSize:"sm",trailingIcon:(0,n.jsx)("span",{className:"text-md md:text-sm",children:"%"}),decimalsLimit:1/0,placeholder:"0",defaultValue:String(t),"aria-invalid":"error"===d,className:"text-md md:text-sm",onValueChange:e=>a&&s(Number(e)),onKeyDown:e=>{"Enter"===e.key&&l(!1)}})})})]})]})}var k=t(64707),_=t(12629),I=t(11684),M=t(97269);function z(e){let{swapAsset:s="-",swapAmount:t,requestDate:i}=e;return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)("span",{children:i}),(0,n.jsxs)(H.lI,{className:"text-grey-1",children:[(0,n.jsx)("img",{src:"/assets/tETH.svg",alt:"icon",className:"w-6 h-6 flex-shrink-0 inline-block mr-1"}),(0,n.jsx)("span",{className:"align-middle",children:"".concat(t," ").concat(s)})]}),(0,n.jsx)("span",{children:"Vault"})]})}function q(e){let{address:s,receiveAsset:t="-",receiveAmount:i,estimatedAcceptDate:l,className:o,iconClassName:d}=e;return(0,n.jsxs)(n.Fragment,{children:[l&&(0,n.jsx)("span",{children:l}),(0,n.jsxs)(H.lI,{className:(0,r.cn)(o),children:[(0,n.jsx)("img",{src:"/assets/wstETH.svg",alt:"icon",className:(0,r.cn)("w-6 h-6 flex-shrink-0 inline-block mr-1",d)}),(0,n.jsx)("span",{className:"align-middle",children:"".concat(i," ").concat(t)})]}),(0,n.jsx)("span",{className:(0,r.cn)(s?"":"hidden md:block md:min-h-[14.25px]"),children:s&&(0,a.sC)(s)})]})}function W(e){let{address:s,swapAsset:t="-",swapAmount:i,receiveAsset:r="-",receiveAmount:a,estimatedAcceptDate:l,requestDate:o}=e;return(0,n.jsx)(H.Pm,{title:"Approve in Wallet",description:"Requesting spending cap for your transaction.",leftSlot:(0,n.jsx)(z,{requestDate:o,swapAsset:t,swapAmount:i}),rightSlot:(0,n.jsx)(q,{className:"text-grey-1",address:s,receiveAsset:r,receiveAmount:a,estimatedAcceptDate:l})})}function B(e){let{address:s,swapAsset:t="-",swapAmount:i,receiveAsset:r="-",receiveAmount:a,estimatedAcceptDate:l,requestDate:o}=e;return(0,n.jsx)(H.Pm,{title:"Confirm Your Request",description:"Sign message to approve your transaction.",leftSlot:(0,n.jsx)(z,{requestDate:o,swapAsset:t,swapAmount:i}),rightSlot:(0,n.jsx)(q,{className:"text-grey-1",address:s,receiveAsset:r,receiveAmount:a,estimatedAcceptDate:l})})}function V(e){let{swapAmount:s,onSubmit:t}=e,[i,a]=(0,o.useState)(!1),l=async()=>{a(!0),await t(),a(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.fKu,{children:[(0,n.jsx)(r.$N8,{className:"text-[20px]",children:"Confirm Swap"}),(0,n.jsx)(r.BeV,{size:"md",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"mb-3",children:["You are about to swap"," ",(0,n.jsx)("span",{className:"text-grey-1 font-semibold",children:"".concat(s," tETH")})," ","from the tETH Vault."]}),(0,n.jsx)("p",{children:"By confirming, you will no longer earn Staking Yield, Market Efficiency Yield (MEY) and Treehouse Nuts."})]})})]}),(0,n.jsxs)(r.cNS,{className:"justify-start md:justify-between flex-col-reverse md:flex-row gap-4",children:[(0,n.jsx)(r.GGM,{asChild:!0,children:(0,n.jsx)(r.zxk,{type:"button",variant:"ghost",size:"md",className:"md:flex-1",children:"Cancel"})}),(0,n.jsx)(r.zxk,{type:"button",variant:"primary",size:"md",className:"md:flex-1",onClick:l,disabled:i,children:"Confirm"})]})]})}var F=t(27648);function O(e){let{address:s,hash:t,swapAsset:i,swapAmount:a,receiveAsset:l,receiveAmount:o}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.Pm,{type:"success",title:"Swap Successful!",leftSlot:(0,n.jsx)(z,{swapAsset:i,swapAmount:a}),rightSlot:(0,n.jsx)(q,{address:s,receiveAsset:l,receiveAmount:o})}),(0,n.jsxs)(r.cNS,{className:"justify-start md:justify-between flex-col-reverse md:flex-row gap-4",children:[(0,n.jsx)(r.GGM,{asChild:!0,children:(0,n.jsx)(r.zxk,{type:"button",variant:"ghost",size:"md",className:"md:flex-1",children:"Close"})}),(0,n.jsx)(r.zxk,{type:"button",variant:"primary",size:"md",className:"md:flex-1",asChild:!0,children:(0,n.jsx)(F.default,{href:r.YjK.DASHBOARD,shallow:!0,children:"View on Dashboard"})})]})]})}function Q(e){let{address:s,swapAsset:t="-",swapAmount:i,receiveAsset:r="-",receiveAmount:a}=e;return(0,n.jsx)(H.Pm,{type:"processing",title:"Swapping...",description:"Give us a few seconds to process your redemption.",leftSlot:(0,n.jsx)(z,{swapAsset:t,swapAmount:i}),rightSlot:(0,n.jsx)(q,{address:s,receiveAsset:r,receiveAmount:a,iconClassName:"opacity-30"})})}function K(e){let{swapAmount:s,receiveAmount:t,minReceiveAmount:i,isDisabled:l,resetForm:d}=e,[c,m]=(0,o.useState)(!1),{address:u}=(0,k.useAccount)(),{swap:h,status:x,isConfirmed:v,isConfirming:p,isError:g,error:b,reset:j,isPending:f,statusApprove:w,isPendingApprove:y,errorApprove:P,resetApprove:N}=function(e){let{walletAddress:s}=e,{writeContract:t,data:n,status:i,error:r,isError:l,isPending:o,reset:d}=(0,I.useWriteContract)(),{isLoading:c,isSuccess:m}=(0,M.useWaitForTransactionReceipt)({hash:n,query:{structuralSharing:!1}}),{onAllowanceAndApproveForWallet:u,statusApprove:h,isPendingApprove:x,errorApprove:v,resetApprove:p}=(0,a.aM)();return{swap:async function(e){let{swapAmount:n,minReceiveAmount:i,protocol:r=a.Bq.CURVE}=e;if(s)try{r===a.Bq.CURVE&&u({tokenAddress:a.eT.TASSET,walletAddress:s,expectedAmount:n,smartContract:a.W2[a.Bq.CURVE]},()=>{t({abi:a.Ob,address:a.W2[a.Bq.CURVE],functionName:"exchange",args:[a.$R.TETH,a.$R.WSTETH,(0,_.f)(n),(0,_.f)(i)]},{onSuccess:l,onError(e){console.log("error",e)}})})}catch(e){console.log("write contract error")}function l(){a.Eh.invalidateQueries({queryKey:["balance"]}),a.Eh.invalidateQueries({queryKey:["readContract"]}),a.Eh.invalidateQueries({queryKey:["getVipInfoEndpoint"]})}},reset:d,hash:n,status:i,error:r,isError:l,isPending:o,isConfirming:c,isConfirmed:m,statusApprove:h,isPendingApprove:x,errorApprove:v,resetApprove:p}}({walletAddress:u});async function E(){await h({swapAmount:s,minReceiveAmount:i})}return(0,n.jsxs)(r.VqE,{open:c,onOpenChange:function(e){m(e),!e&&(N(),(v||g)&&setTimeout(()=>{j(),d()},500))},children:[(0,n.jsx)(r.hgM,{asChild:!0,children:(0,n.jsx)(r.zxk,{fluid:!0,size:"lg",type:"button",disabled:l,children:"Swap wstETH"})}),(0,n.jsxs)(r.cZJ,{className:"xs:max-w-[calc(100vw-48px)] sm:max-w-[500px] bottom-4 top-auto translate-y-0 md:top-1/2 md:-translate-y-1/2",onInteractOutside:e=>{(f||y)&&e.preventDefault()},children:["idle"===x&&"idle"===w&&(0,n.jsx)(V,{swapAmount:s,onSubmit:E}),"idle"===x&&y&&(0,n.jsx)(W,{address:u,swapAsset:"tETH",swapAmount:s,receiveAsset:"wstETH",receiveAmount:t}),"pending"===x&&(0,n.jsx)(B,{address:u,swapAsset:"tETH",swapAmount:s,receiveAsset:"wstETH",receiveAmount:t}),"success"===x&&p&&(0,n.jsx)(Q,{address:u,swapAsset:"tETH",swapAmount:s,receiveAsset:"wstETH",receiveAmount:t}),"success"===x&&v&&(0,n.jsx)(O,{address:u,swapAsset:"tETH",swapAmount:s,receiveAsset:"wstETH",receiveAmount:t}),"error"===w&&(0,n.jsx)(H._m,{title:(0,a.o8)(P),description:(0,a.e$)(P,"We’re sorry, but we’re unable to process your swap at the moment. Please try again later.")}),"error"===x&&(0,n.jsx)(H._m,{title:(0,a.o8)(b),description:(0,a.e$)(b,"We’re sorry, but we’re unable to process your swap at the moment. Please try again later.")})]})]})}var Y=t(27323),U=t(31229);let $=U.z.object({slippage:U.z.coerce.number().min(0),swapAmount:U.z.number().min(0)}).required({slippage:!0,swapAmount:!0});function G(e){let{errorKey:s}=e;return s?(0,n.jsxs)(r.ug1,{variant:"danger",size:"sm",className:"md:text-[14px] px-4",children:["EXCEED_WALLET_BALANCE"===s&&a.in.EXCEED_WALLET_BALANCE_LONG_TEXT,"HIGH_PRICE_IMPACT"===s&&(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:justify-between sm:items-center",children:[(0,n.jsxs)("div",{children:["Recommendation: This swap might result in high slippage. To ensure"," ",(0,n.jsx)("strong",{className:"font-bold",children:"zero slippage"})," redeem your tETH through the ",(0,n.jsx)("strong",{className:"font-bold",children:"Redeem"})," ","option."]}),(0,n.jsx)("div",{children:(0,n.jsx)(r.zxk,{variant:"red-ghost",asChild:!0,className:"w-full sm:w-auto",children:(0,n.jsx)(F.default,{href:r.YjK.REDEEM,shallow:!0,children:"Switch to Redeem"})})})]})]}):null}function Z(e){var s;let{connectWallet:t}=e,{isSigned:x}=(0,l.vI)(),{isUnsupportedChain:v}=(0,a.AH)(),{control:g,watch:b,trigger:j,reset:f,formState:{errors:w},clearErrors:y}=(0,d.cI)({defaultValues:{slippage:.5,swapAmount:void 0},resolver:(0,i.F)($)}),[P,N]=(0,o.useState)(!1),E=b("slippage",.5),A=b("swapAmount",void 0),{receiveAmount:T,isLoading:C,tEthWstEthRate:H,minimumReceived:L}=function(e){let{swapAmount:s,slippage:t}=e,{chainId:n}=(0,k.useAccount)(),{data:i=BigInt(0),isLoading:r}=(0,Y.useReadContract)({abi:a.Ob,address:a.W2[a.Bq.CURVE],functionName:"get_dy",chainId:n,args:[a.$R.TETH,a.$R.WSTETH,(0,_.f)(String(s))],scopeKey:"get_dy-".concat(a.$R.TETH,"-").concat(a.$R.WSTETH,"-").concat(s)}),l=new p.Z((0,m.d)(i)),o=l.dividedBy(s),d=l.multipliedBy(1-t/100);return{receiveAmount:l.toString(),minimumReceived:d.toString(),tEthWstEthRate:o.toString(),isLoading:r}}({swapAmount:Number(A)>0?A:1,slippage:E}),D=(0,o.useMemo)(()=>{var e;return P?"HIGH_PRICE_IMPACT":(null===(e=w.swapAmount)||void 0===e?void 0:e.message)===a.in.EXCEED_WALLET_BALANCE?"EXCEED_WALLET_BALANCE":void 0},[null===(s=w.swapAmount)||void 0===s?void 0:s.message,P]);return(0,c.rf)(()=>{j("slippage")},[E]),(0,n.jsxs)(r.Zbd,{className:"gap-8 text-md",size:"lg",variant:"secondary",children:[(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 leading-[1.2em]",children:[(0,n.jsx)("h4",{className:"text-2xl font-semibold leading-[1.2em]",children:"Swap"}),(0,n.jsxs)(r.Cts,{variant:"secondary",size:"md",children:[(0,n.jsx)("img",{src:"/assets/curve.svg",alt:"ic-curve",className:"w-3.5 h-3.5"}),"Curve"]})]}),(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-2",children:[(0,n.jsx)("label",{className:"text-grey-4 leading-[1.2em]",children:"Max. Slippage:"})," ",(0,n.jsx)(d.Qr,{name:"slippage",control:g,render:e=>{let{field:s}=e;return(0,n.jsx)(R,{value:s.value,onValueChange:s.onChange})}})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center leading-[1.2em]",children:[(0,n.jsx)("label",{children:"Enter Amount"}),(0,n.jsx)(a.xK,{className:"hidden md:block truncate"})]}),(0,n.jsx)(u,{name:"swapAmount",control:g,clearErrors:y}),(0,n.jsx)(a.xK,{className:"block md:hidden truncate"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 leading-[1.2em]",children:[(0,n.jsx)("label",{children:"You Receive"}),(0,n.jsx)(h,{value:Number(A)>0?T:0}),(0,n.jsx)(S,{tEthWstEthRate:H,minimumReceived:Number(A)>0?L:"0",amount:A,isLoading:C,isHighPriceImpact:P,setIsHighPriceImpact:N})]}),x?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(G,{errorKey:D}),(0,n.jsx)(K,{swapAmount:String(null!=A?A:0),receiveAmount:String(T),minReceiveAmount:String(L),isDisabled:Object.keys(w).length>0||A<=0||void 0===A||v,resetForm:()=>{f({swapAmount:void 0}),N(!1)}})]}):t]})}}},function(e){e.O(0,[569,878,345,896,371,962,804,263,716,971,117,744],function(){return e(e.s=70289)}),_N_E=e.O()}]);