"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{27188:function(e,t,s){s.d(t,{a:function(){return l}});var a=s(57437),n=s(66209),i=s(965),r=s(86379);let l=[{functionKey:r.k.DEPOSITING,typeComponent:"link",href:n.YjK.HOME_PAGE,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.sWi,{className:"h-4 w-4 flex-shrink-0 group-data-[state=active]/ui-kit-tab-item:text-brand-50 link-icon"}),"Deposit"]}),shallow:!0,prefetch:!0},{functionKey:r.k.LIQUIDITY_POOL,typeComponent:"link",href:n.YjK.LP_STAKING,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.oVO,{className:"h-4 w-4 flex-shrink-0 group-data-[state=active]/ui-kit-tab-item:text-brand-50 link-icon"}),"LP Staking"]}),shallow:!0,prefetch:!0,tooltip:"Coming soon"},{functionKey:r.k.DASHBOARD,typeComponent:"link",href:n.YjK.DASHBOARD,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.a3V,{className:"h-4 w-4 flex-shrink-0 group-data-[state=active]/ui-kit-tab-item:text-brand-50 link-icon"}),"Dashboard"]}),shallow:!0,prefetch:!0},{typeComponent:"separator",href:"",className:""},{functionKey:r.k.WITHDRAW,typeComponent:"link",href:n.YjK.WITHDRAW,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.W3v,{className:"h-4 w-4 flex-shrink-0 group-data-[state=active]/ui-kit-tab-item:text-brand-50 link-icon"}),"Withdraw"]}),shallow:!0,prefetch:!0,tooltip:"Withdrawals will be available in late September when MEY goes live."},{functionKey:r.k.CLAIM,typeComponent:"link",href:n.YjK.CLAIM,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.m$q,{className:"h-4 w-4 flex-shrink-0 group-data-[state=active]/ui-kit-tab-item:text-brand-50 link-icon"}),(0,a.jsxs)("span",{className:"flex-1 flex items-center gap-1 truncate",children:["Claim ",(0,a.jsx)(i.v,{className:"ml-auto"})]})]}),shallow:!0,prefetch:!0}]},67171:function(e,t,s){s.r(t),s.d(t,{NavigationBottomDefaultLayout:function(){return d}});var a=s(57437),n=s(2265),i=s(66209),r=s(27648),l=s(99376),c=s(27188);s(2690),s(70809),s(36678),s(93115),s(57234),s(20515),s(20814),s(86379),s(80385);var o=s(50315);function d(){let e=(0,l.usePathname)(),t=t=>"/"!==t&&e.startsWith(t)||e===t?"active":"deactive";return(0,a.jsxs)("section",{className:"bg-green-gray-13 sticky -bottom-[calc(env(safe-area-inset-bottom)+0px)] z-[40] w-full md:hidden flex flex-col",children:[(0,a.jsx)("nav",{className:"flex w-full p-2 items-center justify-between border-t-[1px] border-grey-10",children:c.a.map((e,s)=>{let{children:l,className:c,typeComponent:d,functionKey:u,href:m,...x}=e;return"link"===d?(0,a.jsx)(o.w,{functionKey:u,fallback:(0,n.createElement)(r.default,{...x,href:m,key:s,className:(0,i.cn)("flex flex-col gap-1 items-center justify-center p-1 text-grey-4 text-sm leading-[1.83em] font-medium flex-1 pointer-events-none opacity-50 cursor-default",c),"data-state":t(m)},l),children:(0,a.jsx)(r.default,{...x,href:m,className:(0,i.cn)("flex flex-col gap-1 items-center justify-center p-1 group/ui-kit-tab-item text-grey-4 data-[state=active]:text-grey-1 [&:hover_.link-icon]:text-brand-50 text-[10px] xs:text-[12px] sm:text-[14px] leading-[1.83em] tracking-tight sm:tracking-normal font-medium flex-1",c),"data-state":t(m),children:l})},s):null})}),(0,a.jsx)("div",{style:{height:"calc(1.5*env(safe-area-inset-bottom))"}})]})}s(54153)},20515:function(e,t,s){s.r(t),s.d(t,{SidebarDefaultLayout:function(){return d}});var a=s(57437),n=s(66209),i=s(99376),r=s(2265),l=s(50315);function c(e){let{children:t,className:s,href:i,id:r,...l}=e;return(0,a.jsx)(n.fK1,{...l,href:i,variant:"col-line",className:(0,n.cn)("px-6 py-0 h-12 text-md gap-3 hover:bg-green-gray-11 hover:border-green-gray-11",s),children:t})}var o=s(27188);function d(){let e=(0,i.usePathname)(),t=t=>"/"!==t&&e.startsWith(t)||e===t?"active":"deactive";return(0,a.jsx)("aside",{className:"w-[170px] min-w-[170px] hidden md:block",children:(0,a.jsx)("nav",{className:"flex flex-col gap-4 sticky top-8 z-[40] w-[170px] min-w-[170px]",children:o.a.map((e,s)=>{let{typeComponent:i,functionKey:o,tooltip:d,href:u,...m}=e;return(0,a.jsx)(r.Fragment,{children:"link"===i?(0,a.jsx)(l.w,{functionKey:o,fallback:(0,a.jsx)(n.Qlu,{side:"right",align:"center",sideOffset:-24,tooltip:d,classNameContent:"max-w-[250px]",children:(0,a.jsx)(c,{...m,href:"","aria-disabled":!0,className:"w-full"})}),children:(0,a.jsx)(c,{...m,href:u,"data-state":t(u)})}):(0,a.jsx)(n.Z0O,{className:"bg-green-gray-9"})},s)})})})}},50813:function(e,t,s){s.r(t),s.d(t,{BannerVaultFull:function(){return c}});var a=s(57437),n=s(66209),i=s(27648),r=s(2265),l=s(82403);function c(){let[e,t]=(0,r.useState)(!0),{isFullVault:s}=(0,l.z)();return s&&e?(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 sp:py-3 border-b border-brand-90 bg-[linear-gradient(265deg,_#092A26_-26.85%,_#000_109.51%)] shadow-descriptive-button gap-6",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-4 h-4 hidden sp:block"}),(0,a.jsxs)("div",{className:"flex flex-col sp:flex-row sp:items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-[14px] leading-[1.25em] text-grey-1 flex flex-col sp:flex-row sp:items-center gap-0.5",children:[(0,a.jsx)("span",{className:"font-semibold",children:"tETH vault is full."})," ",(0,a.jsx)("span",{className:"text-brand-50",children:"Stay updated on Discord about the next cap raise."})]}),(0,a.jsx)("div",{children:(0,a.jsx)(n.zxk,{variant:"brand-ghost",children:(0,a.jsx)(i.default,{href:n.b_F.DISCORD,target:"_blank",children:"Join Discord"})})})]}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"none",onClick:()=>t(!1),className:"flex-shrink-0 w-4 h-4 cursor-pointer",children:(0,a.jsx)("path",{d:"M13 13L3 3M13 3L3 13",stroke:"#00DDC2",strokeLinecap:"round",strokeLinejoin:"round"})})]}):null}},69073:function(e,t,s){s.r(t),s.d(t,{DepositBannerCapRaise:function(){return c}});var a=s(57437),n=s(82403),i=s(66209),r=s(2265);function l(e){let{label:t,description:s,imgBgPc:n,imgBgSp:l,classImgBgPc:c,classImgBgSp:o,className:d,hasClose:u=!0}=e,[m,x]=(0,r.useState)(!0);return m?(0,a.jsxs)("div",{className:(0,i.cn)("rounded-2xl border border-solid border-brand-90 shadow-descriptive-button bg-[linear-gradient(263deg,_#008071_-70.66%,_#000000_86.69%)] bg-brand-70 relative overflow-hidden",d),children:[(0,a.jsxs)("div",{className:"px-8 py-6 relative z-[1] flex justify-between gap-3 md:gap-8",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 content",children:[(0,a.jsx)("div",{className:"text-[16px] leading-[1.2em] font-semibold text-grey-0",children:t}),(0,a.jsx)("div",{className:"text-grey-4 text-[14px] md:text-[12px] leading-[1.25em]",children:s})]}),u&&(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:17,viewBox:"0 0 16 17",fill:"none",className:"w-4 h-4 flex-shrink-0 cursor-pointer",onClick:()=>x(!1),children:(0,a.jsx)("path",{d:"M13 13.5L3 3.5M13 3.5L3 13.5",stroke:"#F7F7F8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),n&&(0,a.jsx)("img",{src:n,alt:"banner-pc",className:(0,i.cn)("absolute w-auto h-full top-0 right-[60px] hidden md:inline-block",c)}),l&&(0,a.jsx)("img",{src:l,alt:"banner-deposit-sp",className:(0,i.cn)("absolute w-auto h-full top-0 right-0 hidden xs:inline-block md:hidden",o)})]}):null}function c(e){let{children:t}=e,{isFullVault:s}=(0,n.z)();return s?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)(l,{className:"md:[&_.content]:max-w-[450px]",label:(0,a.jsxs)(a.Fragment,{children:["tETH Vault is now"," ",(0,a.jsx)("span",{className:"text-brand-30 drop-shadow-[0px_0px_2px_#00DBC2]",children:"Open"})]}),description:"We're thrilled to announce that we've successfully increased the TVL limit for tETH! You can now stake more tETH and enjoy higher rewards.",imgBgPc:"/assets/bg-banner-deposit-cap-raise.png"})}},76362:function(e,t,s){s.r(t),s.d(t,{VaultCapacity:function(){return r}});var a=s(57437),n=s(66209),i=s(82403);function r(){let{vaultCapacity:e,depositCap:t,isLoading:s,isFullVault:r}=(0,i.z)();return(0,a.jsx)("div",{className:"inline-flex items-center text-[14px] leading-[1.1875em] gap-1 text-grey-4 ",children:s?(0,a.jsx)(n.OdW,{className:"w-[150px] h-[19px]"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-nowrap",children:"Vault Capacity (".concat((0,n.ufS)(t)," ETH):")})," ",(0,a.jsx)("span",{className:(0,n.cn)("text-grey-1",r&&"text-brand-50"),children:e>=0?"".concat((0,n.OEJ)(e,1)):"-"}),(0,a.jsx)(n.Qlu,{tooltip:"Percentage of tETH vault that has been filled.",classNameContent:"max-w-[330px]",children:(0,a.jsx)(n.t3L,{className:"h-4 w-4 flex-shrink-0"})})]})})}},83304:function(e,t,s){s.r(t),s.d(t,{DepositForm:function(){return B}});var a=s(57437),n=s(13590),i=s(66209),r=s(88962),l=s(93804),c=s(2265),o=s(29501),d=s(39502);function u(e){let{tokenAddress:t,className:s}=e,{readableBalance:n,balance:l,isLoading:c}=(0,r.HO)("ETH"===t?void 0:t),o=l?Number((0,d.b)(l.value,l.decimals)):void 0;return(0,a.jsx)("div",{className:(0,i.cn)("leading-[1.1875em]",s),"data-deposittokenbalance":o,children:c?(0,a.jsx)(i.OdW,{className:"w-[150px] h-[19px]"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-grey-4 text-nowrap leading-[1.1875em]",children:"Wallet Balance:"})," ",(0,a.jsx)("span",{children:n})]})})}var m=s(27648);function x(e){let{tokenAddress:t,isLoading:s,rate:n}=e;return s?(0,a.jsx)(i.OdW,{className:"h-[26px] w-[150px]"}):(0,a.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,a.jsxs)("p",{className:"leading-[1.2em]",children:[(0,a.jsx)("span",{className:"text-brand-50",children:"1 tETH"})," ",(0,a.jsx)("span",{className:"text-grey-4",children:"="})," ",(0,a.jsxs)("span",{className:"text-grey-4",children:[n?(0,i.ufS)(n,10):"-"," ",r.PR[t]]})," "]}),(0,a.jsx)(i.Qlu,{tooltip:(0,a.jsxs)(a.Fragment,{children:["tETH is a non-rebasing token. Its exchange rate reflects staking rewards and market efficiency yields that accrue to each tETH token. Detailed calculations can be found in"," ",(0,a.jsx)(m.default,{href:"https://docs.treehouse.finance/protocol/teth/architecture/token-accounting",target:"_blank",className:"text-brand-50 cursor-pointer hover:opacity-80",children:"Treehouse Documentation."})]}),align:"center",className:"align-middle",classNameContent:"max-w-[327px]",children:(0,a.jsx)(i.t3L,{className:"h-4 w-4 flex-shrink-0 text-grey-4"})})]})}var h=s(79263),p=s(64707),f=s(12629),g=s(11684),j=s(97269);function b(e){let{walletAddress:t,symbol:s,depositAmount:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(h.lI,{className:"text-grey-1",children:[(0,a.jsx)("img",{src:"/assets/".concat(s,".svg"),alt:"asset-icon",className:"w-6 h-6 flex-shrink-0 inline-block mr-1"}),(0,a.jsx)("span",{className:"align-middle",children:"".concat(n," ").concat(s)})]}),(0,a.jsx)("span",{children:t&&(0,r.sC)(t)})]})}function v(e){let{receiveAmount:t,className:s,iconClassName:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(h.lI,{className:(0,i.cn)("justify-start flex-row",s),children:[(0,a.jsx)("img",{src:"/assets/tETH.svg",alt:"icon",className:(0,i.cn)("w-6 h-6 flex-shrink-0 inline-block mr-1",n)}),(0,a.jsx)("span",{className:"align-middle",children:"".concat(t," tETH")})]}),(0,a.jsx)("span",{children:"Vault"})]})}function y(e){let{walletAddress:t,symbol:s="ETH",depositAmount:n,receiveAmount:i}=e;return(0,a.jsx)(h.Pm,{type:"confirm",title:"Approve in Wallet",description:"Requesting spending cap for your transaction.",leftSlot:(0,a.jsx)(b,{walletAddress:t,symbol:s,depositAmount:n}),rightSlot:(0,a.jsx)(v,{receiveAmount:i,iconClassName:"opacity-30"})})}function N(e){let{walletAddress:t,symbol:s,depositAmount:n,receiveAmount:i}=e;return(0,a.jsx)(h.Pm,{title:"Confirm Your Request",description:"Sign message to approve your transaction.",leftSlot:(0,a.jsx)(b,{walletAddress:t,symbol:s,depositAmount:n}),rightSlot:(0,a.jsx)(v,{receiveAmount:i,className:"text-grey-1"})})}function w(e){let{walletAddress:t,symbol:s="ETH",depositAmount:n,receiveAmount:l,hash:c}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Pm,{type:"success",title:"Deposit Successful!",description:"We’re thrilled to have you join the fixed income revolution!",successSlot:(0,a.jsx)(h.f,{}),leftSlot:(0,a.jsx)(b,{walletAddress:t,symbol:s,depositAmount:n}),rightSlot:(0,a.jsx)(v,{receiveAmount:l})}),(0,a.jsxs)(i.cNS,{className:"justify-start md:justify-between flex-col-reverse md:flex-row gap-4",children:[c&&(0,a.jsx)(i.zxk,{type:"button",variant:"ghost",size:"md",className:"md:flex-1",asChild:!0,children:(0,a.jsx)(m.default,{href:(0,r.Kh)(c),target:"_blank",children:"View on Etherscan"})}),(0,a.jsx)(i.zxk,{type:"button",variant:"primary",size:"md",className:"md:flex-1",asChild:!0,children:(0,a.jsx)(m.default,{href:i.YjK.DASHBOARD,shallow:!0,children:"View on Dashboard"})})]})]})}function k(e){let{walletAddress:t,symbol:s="ETH",depositAmount:n,receiveAmount:i}=e;return(0,a.jsx)(h.Pm,{type:"processing",title:"Depositing...",description:"Give us a few seconds to process your deposit.",leftSlot:(0,a.jsx)(b,{walletAddress:t,symbol:s,depositAmount:n}),rightSlot:(0,a.jsx)(v,{receiveAmount:i,iconClassName:"opacity-30"})})}function A(e){let{symbol:t,depositAmount:s,onSubmit:n}=e,[r,l]=(0,c.useState)(!1),o=async()=>{l(!0),await n(),l(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.fKu,{children:[(0,a.jsx)(i.$N8,{className:"text-[20px]",children:"Confirm Deposit"}),(0,a.jsx)(i.BeV,{size:"md",asChild:!0,className:"pt-2",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"mb-3",children:["You are about to deposit"," ",(0,a.jsx)("span",{className:"text-grey-1 font-semibold",children:"".concat(s," ").concat(t)})," ","into the tETH Vault."]}),(0,a.jsx)("p",{children:"By confirming, you will start earning Staking Yield, Market Efficiency Yield (MEY) and Treehouse Nuts."})]})})]}),(0,a.jsxs)(i.cNS,{className:"justify-start md:justify-between flex-col-reverse md:flex-row gap-4",children:[(0,a.jsx)(i.GGM,{asChild:!0,children:(0,a.jsx)(i.zxk,{type:"button",variant:"ghost",size:"md",className:"md:flex-1",children:"Cancel"})}),(0,a.jsx)(i.zxk,{variant:"primary",size:"md",className:"md:flex-1",onClick:o,disabled:r,children:"Confirm"})]})]})}function T(e){let{tokenAddress:t,depositAmount:s,receiveAmount:n,isDisabled:l,resetForm:o}=e,[d,u]=(0,c.useState)(!1),m=r.PR[t],{address:x}=(0,p.useAccount)(),{deposit:b,reset:v,resetApprove:T,isConfirmed:E,isConfirming:S,isError:C,isPending:H,status:D,hash:_,error:L,errorApprove:W,statusApprove:z,isPendingApprove:F}=function(e){let{tokenAddress:t,walletAddress:s}=e,{writeContract:a,data:n,status:i,error:l,isError:c,isPending:o,reset:d}=(0,g.useWriteContract)(),{isLoading:u,isSuccess:m}=(0,j.useWaitForTransactionReceipt)({hash:n,query:{enabled:!!n,structuralSharing:!1}}),{onAllowanceAndApproveForWallet:x,statusApprove:h,isPendingApprove:p,errorApprove:b,resetApprove:v}=(0,r.aM)();return{deposit:async function(e){if(s){if("ETH"===r.PR[t])a({abi:r.U4,address:r.SC.THF_ADDRESS,functionName:"depositETH",value:(0,f.f)(e)},{onSuccess:n});else try{await x({tokenAddress:t,walletAddress:s,expectedAmount:e,smartContract:r.SC.THF_ADDRESS},()=>{a({abi:r.U4,address:r.SC.THF_ADDRESS,functionName:"deposit",args:[t,(0,f.f)(e)]},{onSuccess:n})})}catch(e){console.error(e),console.log("write contract error")}}async function n(){r.Eh.invalidateQueries({queryKey:["balance"]}),r.Eh.invalidateQueries({queryKey:["readContract"]}),r.Eh.invalidateQueries({queryKey:["getVipInfoEndpoint"]})}},reset:d,resetApprove:v,hash:n,status:i,statusApprove:h,isPendingApprove:p,errorApprove:b,error:l,isError:c,isPending:o,isConfirming:u,isConfirmed:m}}({tokenAddress:t,walletAddress:x}),R=async()=>{await b(s)};return(0,a.jsxs)(i.VqE,{open:d,onOpenChange:function(e){u(e),!e&&(T(),(E||C)&&setTimeout(()=>{v(),o()},500))},children:[(0,a.jsx)(i.hgM,{asChild:!0,children:(0,a.jsx)(i.zxk,{fluid:!0,size:"lg",type:"button",disabled:l,children:"Deposit ".concat(m)})}),(0,a.jsxs)(i.cZJ,{className:"xs:max-w-[calc(100vw-48px)] sm:max-w-[500px] bottom-4 top-auto translate-y-0 md:top-1/2 md:-translate-y-1/2",onInteractOutside:e=>{(H||F)&&e.preventDefault()},children:["idle"===D&&"idle"===z&&(0,a.jsx)(A,{symbol:m,depositAmount:s,onSubmit:R}),"idle"===D&&F&&(0,a.jsx)(y,{walletAddress:x,symbol:m,depositAmount:s,receiveAmount:n}),"pending"===D&&(0,a.jsx)(N,{walletAddress:x,symbol:m,depositAmount:s,receiveAmount:n}),"success"===D&&S&&(0,a.jsx)(k,{walletAddress:x,symbol:m,depositAmount:s,receiveAmount:n}),"success"===D&&E&&(0,a.jsx)(w,{walletAddress:x,symbol:m,depositAmount:s,receiveAmount:n,hash:_}),"error"===z&&(0,a.jsx)(h._m,{title:(0,r.o8)(W),description:(0,r.e$)(W,"We’re sorry, but we’re unable to process your deposit at the moment. Please try again later.")}),"error"===D&&(0,a.jsx)(h._m,{title:(0,r.o8)(L),description:(0,r.e$)(L,"We’re sorry, but we’re unable to process your deposit at the moment. Please try again later.")})]})]})}var E=s(82403);function S(e){let{children:t,type:s="button",size:n="lg",...r}=e,{isFullVault:l}=(0,E.z)();return t&&!l?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)(i.zxk,{fluid:!0,type:s,size:n,...r,disabled:!0,children:"Vault Full"})}var C=s(37691),H=s(68651),D=s(71282);async function _(e,t){let s=(0,f.f)(e),a=(0,f.f)("0");switch(t){case r.eT.STETH:a=await (0,C.L)(r.gb,{abi:r.Tr,address:r.eT.WSTETH,functionName:"getWstETHByStETH",args:[s]});break;case r.eT.WSTETH:a=s;break;default:{let e=await (0,C.L)(r.gb,{abi:r.DX,address:r.lP.stETH_ETH,functionName:"latestAnswer"}),t=(0,H.Z)((0,D.d)(s)).multipliedBy((0,D.d)(e)).toString();a=await (0,C.L)(r.gb,{abi:r.Tr,address:r.eT.WSTETH,functionName:"getWstETHByStETH",args:[(0,f.f)(t)]})}}let n=await (0,C.L)(r.gb,{abi:r.$l,address:r.eT.TASSET,functionName:"previewDeposit",args:[a]});return(0,H.Z)((0,D.d)(n)).toNumber()}function L(e){let{tokenAddress:t,clearErrors:s,name:n,control:d,setValue:u,isCalculating:m,setCalculating:x}=e,p=(0,h.Ce)(),{isSigned:f}=(0,l.vI)(),{balance:g}=(0,r.HO)("ETH"===t?void 0:t),j=(0,c.useRef)(),b=r.PR[t],v=g?(0,i.VQX)((0,D.d)(g.value)):0,y=(0,o.qo)({name:"depositAmount",control:d});return(0,c.useEffect)(()=>{s&&s(),Number(y)>v&&(null==d||d.setError(n,{message:r.in.EXCEED_WALLET_BALANCE}))},[y,v]),(0,c.useEffect)(()=>{y&&e();async function e(){u("receiveAmount",await _(String(y),t))}},[t]),(0,a.jsx)(o.Qr,{name:n,control:d,render:e=>{let{field:s,fieldState:{error:n}}=e;async function l(e){s.onChange(e),j.current&&clearTimeout(j.current),j.current=setTimeout(async()=>{x("receive"),u("receiveAmount",await _(String(e),t)),j.current=void 0,x(void 0)},300)}return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.UCQ,{inputSize:"md",placeholder:"0",modeStyle:"group",decimal:20,allowNegativeValue:!1,defaultValue:s.value,onValueChange:l,disabled:s.disabled,loadingSkeleton:m&&(0,a.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 left-10 bg-black",style:{width:p?"calc(100% - ".concat(11*((null==b?void 0:b.length)||0)+130+40,"px)"):"calc(100% - 132px)"},children:(0,a.jsx)(i.OdW,{className:"h-9 w-full"})}),"aria-invalid":void 0!==n,leadingIcon:(0,a.jsx)("img",{src:r.hX[t],alt:"asset-icon",className:"group-aria-[disabled=true]/ui-kit-input:opacity-30 h-6 w-6"}),trailingIcon:(0,a.jsxs)("span",{className:"flex gap-4 items-center right-4",children:[(0,a.jsx)("span",{className:"text-grey-4 text-[20px] hidden md:block",children:b}),(0,a.jsx)(i.zxk,{type:"button",variant:"toggle-button",size:"md",onClick:()=>l(v),disabled:!f,children:"Max"})]}),className:"pl-12",style:{paddingRight:p?"".concat(11*((null==b?void 0:b.length)||0)+130,"px"):"92px"}}),n&&(0,a.jsx)(i.ug1,{size:"none",variant:"danger",children:null==n?void 0:n.message})]})}})}function W(e){let{name:t,control:s,setValue:n,tokenAddress:l,isCalculating:d,setCalculating:u}=e,m=(0,c.useRef)();return(0,a.jsx)(o.Qr,{name:t,control:s,render:e=>{let{field:t,fieldState:{error:s}}=e;async function c(e){t.onChange(e),m.current&&clearTimeout(m.current),m.current=setTimeout(async()=>{u("deposit"),n("depositAmount",await (0,r.NH)(String(e),l)),m.current=void 0,u(void 0)},300)}return(0,a.jsx)(i.UCQ,{inputSize:"md",placeholder:"0",modeStyle:"group",decimal:20,defaultValue:t.value,onValueChange:c,disabled:t.disabled,loadingSkeleton:d&&(0,a.jsx)("div",{className:"absolute w-[calc(100%-128px)] top-1/2 -translate-y-1/2 left-10 bg-black",children:(0,a.jsx)(i.OdW,{className:"h-9 w-full"})}),variant:"brand",leadingIcon:(0,a.jsx)("img",{src:"/assets/tETH.svg",alt:"icon",className:"group-aria-[disabled=true]/ui-kit-input:opacity-30 h-6 w-6 flex-shrink-0"}),trailingIcon:(0,a.jsx)("span",{className:"text-[20px] right-4 text-grey-4",children:"tETH"}),className:"pl-12 pr-[80px]"})}})}function z(e){let{...t}=e;return(0,a.jsx)(o.Qr,{...t,render:e=>{let{field:t}=e,s=r.PR[t.value];return(0,a.jsxs)(i.h_2,{children:[(0,a.jsx)(i.e_5,{inputSize:"md",variant:"ghost",className:"w-full md:w-[92px] md:h-8 md:rounded-lg gap-1",icon:(0,a.jsx)(i.SAU,{className:"h-4 w-4 flex-shrink-0"}),children:(0,a.jsx)(i.t93,{className:"text-md md:text-sm",placeholder:s,children:s})}),(0,a.jsx)(i.Z8Q,{variant:"ghost",children:(0,a.jsx)(i._xG,{value:t.value,onValueChange:t.onChange,children:Object.keys(r.PR).map(e=>(0,a.jsx)(i.qBA,{value:e,hidden:!0,className:"h-10 md:h-8 text-md md:text-sm",children:r.PR[e]},e))})})]})}})}var F=s(31229);let R=F.z.object({tokenAddress:F.z.string(),depositAmount:F.z.coerce.number().min(0),receiveAmount:F.z.coerce.number().min(0)}).required({tokenAddress:!0,depositAmount:!0,receiveAmount:!0});function B(e){var t;let{connectWallet:s}=e,{isSigned:d}=(0,l.vI)(),{isUnsupportedChain:m}=(0,r.AH)(),[h,p]=(0,c.useState)(),{control:g,clearErrors:j,reset:b,formState:{errors:v},setValue:y}=(0,o.cI)({defaultValues:{tokenAddress:r.eT.ETH,depositAmount:void 0,receiveAmount:void 0},resolver:(0,n.F)(R)}),N=(0,o.qo)({name:"tokenAddress",control:g}),w=(0,o.qo)({name:"depositAmount",control:g}),k=(0,o.qo)({name:"receiveAmount",control:g}),{rate:A,isLoading:E}=function(e){let[t,s]=(0,c.useState)(0),[a,n]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{(async function(){n(!0);let t=await (0,C.L)(r.gb,{abi:r.$l,address:r.eT.TASSET,functionName:"convertToAssets",args:[(0,f.f)("1")]});switch(e){case r.eT.STETH:{let e=await (0,C.L)(r.gb,{abi:r.Tr,address:r.eT.WSTETH,functionName:"getStETHByWstETH",args:[(0,f.f)("1")]});s((0,H.Z)((0,D.d)(t)).multipliedBy((0,D.d)(e)).toNumber());break}case r.eT.WSTETH:s(Number((0,D.d)(t)));break;default:{let e=await (0,C.L)(r.gb,{abi:r.Tr,address:r.eT.WSTETH,functionName:"getStETHByWstETH",args:[(0,f.f)("1")]}),a=await (0,C.L)(r.gb,{abi:r.DX,address:r.lP.stETH_ETH,functionName:"latestAnswer"});s((0,H.Z)((0,D.d)(t)).multipliedBy((0,D.d)(e)).multipliedBy((0,D.d)(a)).toNumber())}}n(!1)})()},[e]),{rate:t,isLoading:a}}(N);return(0,a.jsxs)("div",{className:"flex flex-col gap-8 text-[14px] h-full",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:gap-2 md:items-center w-full md:w-fit",children:[(0,a.jsx)("label",{className:"text-nowrap leading-[1.1875em]",children:"Enter Amount"}),(0,a.jsx)(z,{name:"tokenAddress",control:g})]}),(0,a.jsx)(u,{tokenAddress:N,className:"hidden md:block truncate"})]}),(0,a.jsx)(L,{name:"depositAmount",tokenAddress:N,control:g,setValue:y,clearErrors:j,isCalculating:"deposit"===h,setCalculating:p}),(0,a.jsx)(u,{tokenAddress:N,className:"block md:hidden truncate"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 mb-auto",children:[(0,a.jsx)("label",{className:"leading-[1.2em]",children:"You Receive"}),(0,a.jsx)(W,{name:"receiveAmount",tokenAddress:N,control:g,setValue:y,isCalculating:"receive"===h,setCalculating:p}),(0,a.jsx)(x,{rate:A,isLoading:E,tokenAddress:N})]}),d?(0,a.jsx)(S,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(null===(t=v.depositAmount)||void 0===t?void 0:t.message)===r.in.EXCEED_WALLET_BALANCE&&(0,a.jsx)(i.ug1,{variant:"danger",size:"sm",className:"md:gap-4 md:text-[14px] px-4",children:r.in.EXCEED_WALLET_BALANCE_LONG_TEXT}),(0,a.jsx)(T,{tokenAddress:N,depositAmount:String(w),receiveAmount:String(k),isDisabled:Object.keys(v).length>0||0>=Number(w)||void 0===w||m,resetForm:()=>b({tokenAddress:N,depositAmount:void 0,receiveAmount:void 0})})]})}):s]})}},82403:function(e,t,s){s.d(t,{z:function(){return c}});var a=s(88962),n=s(2265),i=s(71282),r=s(64707),l=s(27323);function c(){let{depositCap:e,isLoading:t}=function(){let{chainId:e}=(0,r.useAccount)(),{data:t,isLoading:s}=(0,l.useReadContract)({abi:a.U4,address:a.SC.THF_ADDRESS,chainId:e,functionName:"depositCapInEth"});return{depositCap:t?Number((0,i.d)(t)):0,isLoading:s}}(),{totalEthDeposited:s,isLoading:c}=(0,a.IM)(),o=(0,n.useMemo)(()=>s>=0&&e>0&&s>=e,[e,s]),d=(0,n.useMemo)(()=>o?1:s>=0&&e>0?s/e:0,[e,o,s]);return{isFullVault:o,isLoading:(0,n.useMemo)(()=>t||c,[t,c]),vaultCapacity:d,depositCap:e,totalEthDeposited:s}}}}]);