"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[804],{99923:function(e,t,s){s(57437),s(66209),s(27648)},83552:function(e,t,s){s.r(t),s.d(t,{DialogInformPointSystem:function(){return d}});var a=s(57437),n=s(66209),r=s(33145),o=s(27648),u=s(2265),l=s(16050),i=s(64707),c=s(95090);function d(){let{address:e}=(0,i.useAccount)(),{isSigned:t}=(0,c.useSignedMessage)(),[s,d]=(0,l._)(n.Laq,{}),m=(0,u.useMemo)(()=>t&&!((null==s?void 0:s.mps)||[]).includes(e),[e,t,s]);return(0,a.jsx)(n.VqE,{open:m,onOpenChange:t=>{!t&&e&&d({...s,mps:[...new Set([...(null==s?void 0:s.mps)||[],e])]})},children:(0,a.jsxs)(n.cZJ,{className:"max-w-[288px] sm:max-w-[450px] space-y-6 bg-[linear-gradient(0deg,_rgba(0,0,0,0.00)_50%,_rgba(19,186,154,0.20)_87.44%)] bg-[#010101]",children:[(0,a.jsx)("div",{children:(0,a.jsx)(n.GGM,{asChild:!0,children:(0,a.jsx)(n.SLE,{className:"flex-shrink-0 w-4 h-4 ml-auto cursor-pointer text-grey-1"})})}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)(r.default,{src:"/assets/dialog-treehouse-nuts.png",width:278,height:166,priority:!0,alt:"vault-full",className:"w-full h-auto max-w-[240px] sm:max-w-[278px]"}),(0,a.jsx)(n.$N8,{className:"text-[20px] text-brand-50 text-center justify-center mt-6",children:"Treehouse Nuts are now Live"}),(0,a.jsx)(n.BeV,{size:"md",className:"text-grey-1 text-center justify-center mt-1",children:"Earn a reward boost on top of staking and market efficiency yield when you deposit early."})]}),(0,a.jsx)(n.cNS,{className:"justify-center pb-6",children:(0,a.jsx)(n.zxk,{type:"button",size:"md",className:"max-w-[250px]",fluid:!0,asChild:!0,children:(0,a.jsx)(o.default,{href:n.b_F.BOOST_NUTS_DOC,target:"_blank",children:"Find Out More"})})})]})})}},50827:function(e,t,s){s.r(t),s.d(t,{DialogUpgradePointSystem:function(){return l}});var a=s(57437),n=s(66209),r=s(33145),o=s(2265),u=s(16050);function l(){let[e,t]=(0,u._)(n.Laq,{}),s=(0,o.useMemo)(()=>!(null==e?void 0:e.ups),[e]);return(0,a.jsx)(n.VqE,{open:s,onOpenChange:s=>{s||t({...e,ups:!0})},children:(0,a.jsxs)(n.cZJ,{className:"max-w-[288px] sm:max-w-[450px] space-y-6 bg-[linear-gradient(0deg,_rgba(0,0,0,0.00)_50%,_rgba(19,186,154,0.20)_87.44%)] bg-[#010101]",children:[(0,a.jsx)("div",{children:(0,a.jsx)(n.GGM,{asChild:!0,children:(0,a.jsx)(n.SLE,{className:"flex-shrink-0 w-4 h-4 ml-auto cursor-pointer text-grey-1"})})}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsx)(r.default,{src:"/assets/dialog-treehouse-nuts.png",width:278,height:166,priority:!0,alt:"vault-full",className:"w-full h-auto max-w-[240px] sm:max-w-[278px]"}),(0,a.jsx)(n.$N8,{className:"text-[20px] text-brand-50 text-center justify-center mt-11 max-w-[284px]",children:"Dashboard upgrading works are in progress!"}),(0,a.jsx)(n.BeV,{size:"md",className:"text-grey-1 text-center justify-center mb-11 mt-2 max-w-[354px]",children:"Rest assured, your nuts and boosts are continuously being accrued in the background."})]})]})})}},10345:function(e,t,s){s.r(t),s.d(t,{HasAuth:function(){return n}});var a=s(95090);function n(e){let{children:t,fallback:s}=e,{isSigned:n}=(0,a.useSignedMessage)();return!1===n&&s?s:n&&t}},621:function(e,t,s){s.d(t,{m:function(){return a}});let a={UNKNOWN:"Something went wrong. Please try again.",TOKEN_NO_EXIST:"Token not exist.",RENEW_TOKEN_FAILED:"Cannot renew access token.",REFERRAL_CODE_NOT_WORK:"Oops! That referral code didn't work.",WALLET_REFERRED:"You have already redeemed a referral code.",WALLET_HAS_TRANSACTION:"Referee have transaction."}},87503:function(e,t,s){s.d(t,{B:function(){return a},d:function(){return n}});let a="token",n="rc"},93804:function(e,t,s){s.d(t,{J2:function(){return w.HasAuth},mq:function(){return n.m},d9:function(){return x.d},IN:function(){return r.I},Oq:function(){return k},r_:function(){return o},Kk:function(){return u},sc:function(){return i},oA:function(){return d},jR:function(){return g},ZL:function(){return f},Pr:function(){return N},eG:function(){return v},Sv:function(){return _},CX:function(){return m},c5:function(){return p},vI:function(){return a.useSignedMessage},DV:function(){return T}});var a=s(95090),n=s(621),r=s(94999);async function o(e){try{let t=null==e?void 0:e.tags,s=null==e?void 0:e.revalidate,a=await (0,r.I)({baseApiUrl:"https://api.treehouse.finance/boostHistory/current",tags:t,revalidate:s}),o=await a.json();if(a.ok)return{status:a.ok,code:200,message:a.statusText,result:o};return{status:!1,code:(null==o?void 0:o.code)||400,message:(null==o?void 0:o.message)||n.m.UNKNOWN}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN}}}async function u(e){try{let t=null==e?void 0:e.tags,s=null==e?void 0:e.revalidate,a=await (0,r.I)({baseApiUrl:"https://api.treehouse.finance/boostSetting",tags:t,revalidate:s}),o=await a.json();if(a.ok)return{status:a.ok,code:200,message:a.statusText,result:o};return{status:!1,code:(null==o?void 0:o.code)||400,message:(null==o?void 0:o.message)||n.m.UNKNOWN}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN}}}async function l(e){try{let t=null==e?void 0:e.params,s=null==e?void 0:e.tags,a=null==e?void 0:e.revalidate,o=await (0,r.I)({baseApiUrl:"https://api.treehouse.finance/v2/point/accumulatedInfo",tags:s,revalidate:a,params:t}),u=await o.json();if(o.ok)return{status:o.ok,code:200,message:o.statusText,result:u};return{status:!1,code:(null==u?void 0:u.code)||400,message:(null==u?void 0:u.message)||n.m.UNKNOWN,result:{}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN,result:{}}}}async function i(e){try{let t=null==e?void 0:e.tags,s=null==e?void 0:e.revalidate,a=await (0,r.I)({baseApiUrl:"https://api.treehouse.finance/point/expectedPoint",tags:t,revalidate:s}),o=await a.json();if(a.ok)return{status:a.ok,code:200,message:a.statusText,result:o};return{status:!1,code:(null==o?void 0:o.code)||400,message:(null==o?void 0:o.message)||n.m.UNKNOWN,result:{}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN,result:{}}}}var c=s(66209);async function d(e){let{params:t,tags:s,revalidate:a}=e;try{let e=await (0,c.Zb1)({baseApiUrl:"https://api.treehouse.finance/v2/point/leaderboard",tags:s,revalidate:a,params:t}),r=await e.json();if(e.ok)return{status:e.ok,code:200,message:e.statusText,result:r};return{status:!1,code:(null==r?void 0:r.code)||400,message:(null==r?void 0:r.message)||n.m.UNKNOWN,result:{}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN,result:{}}}}async function m(e){try{let t=null==e?void 0:e.tags,s=null==e?void 0:e.revalidate,a=await (0,c.Zb1)({baseApiUrl:"https://api.treehouse.finance/point/totalPoints",tags:t,revalidate:s}),r=await a.json();if(a.ok)return{status:a.ok,code:200,message:a.statusText,result:r};return{status:!1,code:(null==r?void 0:r.code)||400,message:(null==r?void 0:r.message)||n.m.UNKNOWN,result:{}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN,result:{}}}}async function g(e){try{let t=null==e?void 0:e.tags,s=null==e?void 0:e.revalidate,a=await (0,r.I)({baseApiUrl:"https://api.treehouse.finance/referral/code",tags:t,revalidate:s}),o=await a.json();if(a.ok)return{status:a.ok,code:200,message:a.statusText,result:o};return{status:!1,code:(null==o?void 0:o.code)||400,message:(null==o?void 0:o.message)||n.m.UNKNOWN,result:{}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN,result:{}}}}async function f(e){try{let t=null==e?void 0:e.tags,s=null==e?void 0:e.revalidate,a=await (0,r.I)({baseApiUrl:"https://api.treehouse.finance/referral/hasTransaction",tags:t,revalidate:s}),o=await a.json();if(a.ok)return{status:a.ok,code:200,message:a.statusText,result:o};return{status:!1,code:(null==o?void 0:o.code)||400,message:(null==o?void 0:o.message)||n.m.UNKNOWN,result:{}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN,result:{}}}}async function v(e){let{params:t,tags:s,revalidate:a}=e;try{let e=await (0,c.Zb1)({baseApiUrl:"https://api.treehouse.finance/referral/referee/recently",tags:s,revalidate:a,params:t}),r=await e.json();if(e.ok)return{status:e.ok,code:200,message:e.statusText,result:r};return{status:!1,code:(null==r?void 0:r.code)||400,message:(null==r?void 0:r.message)||n.m.UNKNOWN,result:{}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN,result:{}}}}async function N(e){try{let t=null==e?void 0:e.tags,s=null==e?void 0:e.revalidate,a=await (0,r.I)({baseApiUrl:"https://api.treehouse.finance/referral/referee",tags:t,revalidate:s}),o=await a.json();if(a.ok)return{status:a.ok,code:200,message:a.statusText,result:o};return{status:!1,code:(null==o?void 0:o.code)||400,message:(null==o?void 0:o.message)||n.m.UNKNOWN,result:{}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN,result:{}}}}async function h(e){try{let t=null==e?void 0:e.tags,s=null==e?void 0:e.revalidate,a=await (0,r.I)({baseApiUrl:"https://api.treehouse.finance/referral/referrer",tags:t,revalidate:s}),o=await a.json();if(a.ok)return{status:a.ok,code:200,message:a.statusText,result:o};return{status:!1,code:(null==o?void 0:o.code)||400,message:(null==o?void 0:o.message)||n.m.UNKNOWN,result:{}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN,result:{}}}}async function p(e){let{params:t,tags:s,revalidate:a}=e;try{let e=await (0,r.I)({baseApiUrl:"https://api.treehouse.finance/referral/referrer",method:"POST",tags:s,revalidate:a,data:t}),o=await e.json();if(e.ok)return{status:e.ok,code:200,message:e.statusText,result:o};return{status:!1,code:(null==o?void 0:o.code)||400,message:(null==o?void 0:o.message)||n.m.UNKNOWN,result:{}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||n.m.UNKNOWN,result:{}}}}var x=s(87503);s(99923),s(83552),s(50827);var w=s(10345);let y=e=>{var t,s,a;return{wallet_address:null!==(t=null==e?void 0:e.wallet_address)&&void 0!==t?t:"",code:null!==(s=null==e?void 0:e.code)&&void 0!==s?s:"",total_eth:null!==(a=null==e?void 0:e.total_eth)&&void 0!==a?a:""}};async function _(){let e=await h();return y(null==e?void 0:e.result)}let k=e=>{if(e<.01&&e>0)return"< 0.01";let t=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2,roundingMode:"floor"});return e>=1e9?t.format(e/1e9)+"B":t.format(e)};s(88962),s(16050);var O=s(71632),S=s(2265),U=s(64707);async function b(){var e;let t=await l();return(null==t?void 0:null===(e=t.result)||void 0===e?void 0:e.total_rewarded)||""}function T(){let{address:e}=(0,U.useAccount)(),{isSigned:t}=(0,a.useSignedMessage)(),{data:s,isLoading:n}=(0,O.useQuery)({queryKey:["sotatek","treehouseNutsAccrued",e,t],queryFn:b,enabled:t,gcTime:0,refetchInterval:15e3});return{isLoading:n,walletPoint:(0,S.useMemo)(()=>t?s:void 0,[s,t])}}},95090:function(e,t,s){s.r(t),s.d(t,{AuthApiProvider:function(){return k},useSignedMessage:function(){return _}});var a=s(57437),n=s(2265),r=s(66209),o=s(46462),u=s(64707),l=s(19496),i=s(32233),c=s(91300),d=s(89472),m=s(621);async function g(e){let{params:t}=e;try{let e=await (0,r.Zb1)({baseApiUrl:"https://api.treehouse.finance/user/login",method:"POST",data:t}),s=await e.json();if(e.ok)return{status:e.ok,code:e.status,message:e.statusText,result:s};return{status:!1,code:s.code,message:s.message||m.m.UNKNOWN}}catch(e){return console.log("error",e),{status:!1,code:400,message:m.m.UNKNOWN}}}async function f(e){try{var t;let s=await g({params:e});return null==s?void 0:null===(t=s.result)||void 0===t?void 0:t.token}catch(e){return null}}var v=s(8620),N=s(88748),h=s(59455),p=s(94999);async function x(e){try{let t=null==e?void 0:e.tags,s=null==e?void 0:e.revalidate,a=await (0,p.I)({baseApiUrl:"https://api.treehouse.finance/userAgreementSignatures/"+(null==e?void 0:e.walletAddress),tags:t,revalidate:s}),n=await a.json();if(a.ok)return{status:a.ok,code:200,message:a.statusText,result:n};return{status:!1,code:(null==n?void 0:n.code)||400,message:(null==n?void 0:n.message)||m.m.UNKNOWN,result:{data:[]}}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||m.m.UNKNOWN,result:{data:[]}}}}async function w(e){let{params:t}=e;try{let e=await (0,p.I)({baseApiUrl:"https://api.treehouse.finance/v2/userAgreementSignatures",method:"POST",data:t}),a=await e.json();if(e.ok){var s;return{status:e.ok,code:200,message:null!==(s=null==a?void 0:a.message)&&void 0!==s?s:e.statusText}}return{status:!1,code:(null==a?void 0:a.code)||400,message:(null==a?void 0:a.message)||m.m.UNKNOWN}}catch(e){return{status:!1,code:(null==e?void 0:e.code)||400,message:(null==e?void 0:e.message)||m.m.UNKNOWN}}}let y=(0,n.createContext)({isSigned:!1}),_=()=>(0,n.useContext)(y);function k(e){let{children:t}=e,{isSigned:s}=function(){let{address:e}=(0,u.useAccount)(),{signMessage:t}=(0,l.useSignMessage)(),{disconnect:s}=(0,i.useDisconnect)(),{reconnect:a}=(0,c.useReconnect)(),m=(0,v.T)(e),[g,p]=(0,n.useState)(-1),y=(0,n.useMemo)(()=>!!(m?localStorage.getItem(m):void 0),[m,g]),{trackingUserAgreementSignatures:_}=function(e){let{address:t,tokenKey:s}=e,{disconnect:a}=(0,i.useDisconnect)(),{signMessage:n}=(0,l.useSignMessage)();return{trackingUserAgreementSignatures:async()=>{if(s&&t)try{let o=await x({walletAddress:t});if(o.status){var e,r;if(null==o?void 0:null===(r=o.result)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.length)return}else{localStorage.removeItem(s),a();return}let u=(0,N.w)((0,h.NC)("Terms of Service Version 1.0")),l=(0,N.w)((0,h.NC)("Privacy Policy Version 1.0")),i=String(window.crypto.getRandomValues(new Uint32Array(1))[0]),c=Math.floor(new Date().getTime()/1e3),d=JSON.stringify({privacy_policy_hash:l,term_of_service_hash:u,nonce:i,sign_at:String(c)}),m=(0,N.w)((0,h.NC)(d));n({message:"UserAgreement: ".concat(m),account:t},{onError(){localStorage.removeItem(s),a()},async onSuccess(e){(await w({params:{sign_message:m,term_of_service_hash:u,privacy_policy_hash:l,wallet_address:t,signature:e,nonce:i,sign_at:c}})).status||(localStorage.removeItem(s),a())}})}catch(e){console.log(e),localStorage.removeItem(s),a()}}}}({address:e,tokenKey:m});return(0,n.useEffect)(()=>{m&&e&&(localStorage.getItem(m)||a())},[m,e,a]),(0,d.useAccountEffect)({onConnect(a){try{var n;if(!e||!m)return;let r=localStorage.getItem(m),u=r?null===(n=JSON.parse(r))||void 0===n?void 0:n.refresh_token_expires_at:void 0,l=(0,o.Q)(new Date)+300;(!u||Number(u)<l)&&setTimeout(()=>{t({message:"Welcome to tETH",account:e},{onError(e){localStorage.removeItem(m),s()},async onSuccess(t){let a=await f({address:e,signature:t});if(a){let t={...a,address:e};await localStorage.setItem(m,JSON.stringify(t)),p(e=>e+1),_()}else localStorage.removeItem(m),s()}})},500),console.log("Connected!",a)}catch(e){console.log(e),s()}},onDisconnect(){(0,r._T7)(),console.log("Disconnected!")}}),{isSigned:y}}();return(0,a.jsx)(y.Provider,{value:{isSigned:s},children:t})}},94999:function(e,t,s){let a;s.d(t,{I:function(){return g}});var n=s(66209),r=s(88962),o=s(46462),u=s(621);async function l(e){try{let t=e.refresh_token,s=await (0,n.Zb1)({baseApiUrl:"https://api.treehouse.finance/token/renewAccess",method:"POST",data:{refresh_token:t}}),a=await s.json();if(s.ok)return{status:s.ok,code:s.status,message:s.statusText,result:a};return{status:!1,code:401,message:u.m.RENEW_TOKEN_FAILED}}catch(e){return{status:!1,code:401,message:u.m.RENEW_TOKEN_FAILED}}}s(57437),s(99923);var i=s(8620);async function c(e){let{address:t,refresh_token:s,refresh_token_expires_at:a}=e;try{let e=await l({refresh_token:s}),n=(0,i.T)(t);if(e.result)return localStorage.setItem(String(n),JSON.stringify({address:t,access_token:e.result.access_token,access_token_expires_at:e.result.access_token_expires_at,refresh_token:s,refresh_token_expires_at:a})),e.result;return}catch(e){return}}var d=s(15676),m=s(24380);async function g(e){let t=function(e){try{let e=(0,m.D)(d.gb).address,t=(0,i.T)(e);if(!t)return;let s=localStorage.getItem(t);return s?JSON.parse(s):{}}catch(e){return}}(),s=t.access_token,l=t.access_token_expires_at,g=(0,o.Q)(new Date)+300;if(Number(l)<g){void 0===a&&(a=c({address:t.address,refresh_token:t.refresh_token,refresh_token_expires_at:t.refresh_token_expires_at}));let e=await a;a=void 0;let n=null==e?void 0:e.access_token;if(void 0===n)return await (0,r.co)(),new Response(JSON.stringify({status:!1,code:401,message:u.m.RENEW_TOKEN_FAILED}),{status:401,statusText:u.m.RENEW_TOKEN_FAILED});s=n}let f=await (0,n.Zb1)({...e,headers:{"session-key":s}});return 401===f.status&&await (0,r.co)(),f}},8620:function(e,t,s){s.d(t,{T:function(){return n}});var a=s(87503);let n=e=>e?"".concat(a.B,"-").concat(e):void 0}}]);